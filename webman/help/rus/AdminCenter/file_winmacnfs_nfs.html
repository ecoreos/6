<!DOCTYPE html>
<html class="img-no-display">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<title>Win/Mac/NFS</title>


<link href="../../help.css" type="text/css" rel="stylesheet" />
<link href="../../scrollbar/flexcroll.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="../../scrollbar/flexcroll.js"></script>
<script type="text/javascript" src="../../scrollbar/initFlexcroll.js"></script>
</head>
<body>




<h2>Служба NFS</h2>
<p>Служба NFS позволяет клиентам Linux получать доступ к данным на устройстве DiskStation.</p>
<h4>Включение службы NFS:</h4>
<ol>
<li>Выберите <strong>Панель управления</strong> ><strong> Файловые службы</strong> > <strong>Win/Mac/NFS</strong> и установите флажок <b>Включить NFS</b>.</li>
<li>Нажмите <b>Применить</b>.</li>
</ol>


<div class="section">
  <h4>Примечание.</h4>
<ul>
<li> DiskStation В настоящее время поддерживаются протоколы NFSv2, NFSv3 и NFSv4.</li>
<li>При подключении можно указать нужную версию NFS, добавив в команду параметр <strong>-o vers=2</strong>, <strong>-o vers=3</strong> или <strong>-o vers=4</strong>.</li>
</ul>
</div>


<h4>Предоставление клиентам Linux прав доступа к папкам общего доступа:</h4>
<p>Выберите <b>Панель управления</b> > <b>Папка общего доступа</b>. Выберите папку общего доступа и нажмите <strong>Редактировать</strong> для изменения правил NFS и управления правами доступа к этой папке для клиентов Linux.</p>


<h3>Настройка поддержки протокола NFSv4</h3>
<p>Вы можете определить, поддерживает ли ваш NFS-сервер протокол NFSv4. Если этот параметр включен, NFS-сервер будет поддерживать протоколы NFSv2, NFSv3 и NFSv4. В противном случае будут поддерживаться только протоколы NFSv2 и NFSv3.</p>

<h4>Включение поддержки NFSv4:</h4>
<ol>
<li>Установите флажок <b>Включить поддержку NFSv4</b>.</li>
<li>В поле <b>Домен NFSv4</b> введите имя нужного домена NFSv4. Это поле не является обязательным, и его можно оставить пустым.</li>
<li>Нажмите <b>Применить</b>.</li>
</ol>

<div class="section">
<h4>Примечание.</h4>
<p>При использовании NFSv4 для подключения папки общего доступа обратите внимание на следующее. В противном случае указанный пользователь не сможет выполнять операции с файлами.</p>
<ul>
<li>На клиенте NFS должна быть включена служба idmapd.</li>
<li>Параметры домена NFSv4 в файле idmapd.conf на клиенте NFS должны соответствовать значению в поле <b>Домен NFSv4</b> на DiskStation.</li>
</ul>

</div>

<h3>Дополнительные настройки</h3>

<h4>Применение разрешений UNIX по умолчанию</h4>
<p> Если установлен флажок <strong>Применение разрешений UNIX по умолчанию</strong>, при выгрузке или создании файлов и папок вместо разрешений Windows ACL применяются стандартные разрешения UNIX, заданные в клиенте Linux. Те же разрешения можно применить с помощью команды UNIX <strong>umask</strong>. Если этот параметр включен, для файлов используется разрешение UNIX 644, а для папок — разрешение 755. Если этот параметр отключен, для файлов используется разрешение UNIX 666, а для папок — разрешение 777. По умолчанию параметр unmask имеет значение 022.</p><div class="section">
<h4>Примечание.</h4>
<ul>
  <li>Для всех папок общего доступа с включенными разрешениями Windows ACL (кроме папки "photo" и папок на внешних дисках) необходимо выполнить команду <strong>chmod</strong> на клиенте Linux или FTP. В результате типы разрешений для папок и файлов изменятся с Windows ACL на UNIX.</li>
  <li>Включение данного параметра может привести к несогласованности разрешений между различными протоколами. Во избежание несогласованности рекомендуется не включать данный параметр.</li>
</ul>
</div>

<h4>Пользовательский порт</h4>
<p>Вы можете настроить номера портов для служб statd и nlockmgr.</p>


<ol>
<li>Выберите <strong>Пользовательские порты</strong>.</li>
<li>Введите номера портов в поля <strong>Порт statd </strong>и<strong> Порт nlockmgr</strong>.</li>
<li>Нажмите <b>Применить</b>.</li>
</ol>

<div class="section">
<h4>Примечание.</h4>
<ul>
<li>Если вы предпочитаете использовать службы NFSv3, перейдите в раздел <strong>Панель управления</strong> > <strong>Безопасность</strong> > <strong>Брандмауэр</strong> и создайте правило брандмауэра, позволяющее выбирать "файловый сервер Mac/Linux" в списке встроенных приложений.</li>
</ul>
</div>
<h4>Настройка размера пакета чтения/записи</h4>
<p>Если в клиенте NFS невозможно задать размер пакета чтения/записи, можно указать в этом поле значение по умолчанию.</p>


<ol>
<li>Выберите нужный размер пакета в полях <strong>Размер пакета чтения</strong> и <strong>Размер пакета записи</strong>.</li>
<li>Нажмите <b>Применить</b>.</li>
<li>Повторно создайте папку общего доступа.</li>
</ol>

<div class="section">
<h4>Примечание.</h4>
<ul>
<li>После изменения размера пакета чтения/записи необходимо отключить папку общего доступа и подключить ее снова, чтобы новые настройки вступили в силу.</li>
<li>Эти настройки применяются только к клиентам NFS, подключенным по протоколу UDP (User Datagram Protocol).</li>
</ul>
</div>




<h3>Настройки Kerberos*</h3>
<p>Kerberos — сетевой протокол аутентификации. Он позволяет клиентам и серверам обмениваться данными в незащищенной сети, проверяя и подтверждая подлинность своих идентификационных данных в безопасном режиме. DiskStation предоставляет возможность импорта существующего ключа Kerberos. После успешного импорта ключа клиенты NFS могут использовать протокол аутентификации Kerberos для подключения к DiskStation.</p>

<h4> Импорт ключа Kerberos: </h4>
<ol>
<li>Нажмите <strong>Настройки Kerberos</strong>.</li>
<li>Нажмите кнопку <b>Импорт</b>.</li>
<li>Выберите ключ Kerberos для импорта.</li>
<li>Нажмите <b>OK</b>.</li>
</ol>

<h3><a name="idmap"></a>Сопоставление идентификатора Kerberos</h3>
<p>Вы можете сопоставить отдельные субъекты Kerberos с учетными записями локальных пользователей DSM.</p>
<h4> Сопоставление субъектов Kerberos с учетными записями локальных пользователей: </h4>
<ol>
<li>Нажмите <strong>Настройки Kerberos</strong>.</li>
<li>Откройте вкладку <strong>Сопоставление идентификатора</strong>.</li>
<li> Нажмите кнопку <b>Добавить</b>. Выберите один из следующих параметров.</li>
<ul>
<li><strong>Сопоставление идентификатора.</strong> Укажите субъекта Kerberos и учетную запись локального пользователя, с которой будет сопоставлен субъект.</li>
<li><strong>Рекомендуемые списки сопоставления.</strong> Этот параметр отображает список автоматически созданных рекомендуемых сопоставлений субъекта Kerberos с учетными записями локальных пользователей.</li>
</ul>
</ol>
<div class="section disable-eds14">
  <h4> Примечание. </h4>
<ul>
<li>Если требуется сопоставить клиента NFS, использующего для подключения протокол Kerberos, с существующей учетной записью пользователя домена/LDAP, убедитесь, что вы присоединились к службе каталогов. Кроме того, для Directory Server должен быть указан атрибут, содержащий соответствующего субъекта Kerberos.</li>
<ul>
<li><strong>Пользователь домена.</strong> Соответствующий атрибут должен иметь формат <strong>userPrincipalName</strong>.</li>
<li><strong>Пользователь LDAP.</strong> Соответствующий атрибут должен иметь формат <strong>GSSAuthName</strong>.</li>
</ul>
<li>Если не удается сопоставить пользователя с локальным пользователем или пользователем домена/LDAP, этого пользователя следует сопоставить с гостевой учетной записью "guest".<li>Приоритет сопоставлений выглядит следующим образом: Локальный пользователь > Пользователь домена/LDAP > Гость. </li>
<li>Для изменения разрешений на доступ на клиентах NFS используйте список управления доступом Windows (ACL). Права доступа, настраиваемые в разделе <strong>Панель управления</strong> > <strong>Пользователь</strong>, не применяются к клиентам NFS.</li>
</ul>
</div>
<p><br>____<br> * Данная функция доступна только в некоторых моделях.</p>



</body>
</html>