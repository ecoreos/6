<!DOCTYPE html>
<html class="img-no-display">
 <head>
<link href="../../help.css" type="text/css" rel="stylesheet" />
<link href="../../scrollbar/flexcroll.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="../../scrollbar/flexcroll.js"></script>
<script type="text/javascript" src="../../scrollbar/initFlexcroll.js"></script>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>High Availability</title>


 </head>
 <body>
<h2>Ошибка split-brain</h2>

<p>Если кластер High Availability работает исправно, только один сервер-участник должен выполнять роль активного сервера. В этом случае пассивный сервер обнаруживает активный сервер по подключению Heartbeat и подключению для передачи данных.</p>

<p>Если все подключения (и Heartbeat, и для передачи данных) утеряны, оба сервера могут пытаться взять на себя роль активного. Такая ситуация называется ошибкой split-brain (ошибка "расщепления разума"). В этом случае подключения к IP-адресам кластера High Availability будут перенаправлены на один из двух серверов. Несогласованные данные могут обновиться или записаться на двух серверах.</p>
        
<p>Если при повторном соединении подключения Heartbeat или передачи данных система отобразит ошибку split-brain и обнаружит несоответствие в данных между двумя серверами, она перейдет в безопасный режим High Availability.</p> 

       
<h4>В случае возникновения ошибки split-brain происходит следующее.</h4>
	<ol>
    <li>Пока ошибка split-brain не будет устранена, сервисы на обоих серверах и IP-адресах кластера High Availability будут недоступны.</li>
	<li>Как только оба сервера переходят в безопасный режим High Availability, на левой панели появляется новая вкладка <strong>Разделение центра управления</strong>. На этой вкладке приводится следующая информация: различия между файлами в общих папках на двух серверах, время, когда сервера стали активными, а также информация о последнем подключении iSCSI Target. Все остальные вкладки остаются в режиме только для чтения.</li>
<li>В безопасном режиме High Availability File Station будет работать в режиме только для чтения, и вы сможете скачивать и просматривать файлы.</li>
       <li>На вкладке <b>Обзор</b> разрешается только устранять ошибки split-brain или выключать текущий сервер для входа. Для устранения ошибок split-brain выполните одно из следующих действий.<ul>
       <li>Выберите один сервер в качестве активного сервера кластера High Availability, а другой — в качестве пассивного. После перезагрузки обоих серверов все различающиеся данные и настройки на активном сервере будут синхронизированы с пассивным. Стоит учитывать, что данные, обновляемые на пассивном сервере при ошибке split-brain, будут утеряны.</li>
       <li>Выберите один сервер в качестве активного сервера кластера High Availability и отмените привязку другого. После перезапуска обоих серверов активный сервер останется в кластере High Availability, а несвязанный сервер сохранит свои данные и вернется в состояние <b>Автономный</b>. Стоит учитывать, что для привязки нового пассивного сервера в будущем потребуется полная репликация.</li>
       <li>Отмените привязку обоих серверов, зарезервируйте данные каждого из них и позвольте им вернуться в состояние <b>Автономный</b>.</li>
       </ul>
       </li>
	</ol>
    <div class="section">
<h4>Примечания</h4>
    <ul>
    <li>Чем больше файлов находится в папках общего доступа, тем больше времени займет составление списка различий.</li>
    <li>Перед выбором сервера в качестве активного или пассивного убедитесь, что оба сервера включены.</li>
    </ul>
    </div>

 </body>
</html>
