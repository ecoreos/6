<!DOCTYPE html>
<html class="img-no-display">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<title>Win/Mac/NFS</title>


<link href="../../help.css" type="text/css" rel="stylesheet" />
<link href="../../scrollbar/flexcroll.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="../../scrollbar/flexcroll.js"></script>
<script type="text/javascript" src="../../scrollbar/initFlexcroll.js"></script>
</head>
<body>
<h2>Windows ファイルサービス</h2>

<p>Windows ファイル サービスによって、SMB/CIFS サポートをもつ Windows、Mac、Linux のクライアントの、 DiskStation に保存されたデータへのアクセスが可能になります。Windows エクスプローラで DiskStation のファイルを参照したり、ネットワーク ドライブとして共有フォルダをマウントしたりするには、<strong>[コントロール パネル]</strong> > <strong>[ファイル サービス]</strong> > <strong>[Win/Mac/NFS]</strong> でこのオプションを有効にしてください。</p>


<h4>Windows ファイルサービスを有効にするには：</h4>
<ol>
<li>
<b>[Windows ファイルサービスを有効にする]</b> を選択します。
</li>
<li>
<b>[適用]</b> をクリックします。
</li>
</ol>

<div class="section disable-hi3535">
<h4>注意：</h4>
<p>Windows ファイル サービスを有効にしたら、SMB を介して完全にインデックス付けしたフォルダを Mac コンピュータにマウントし、Finder でスポットライトを使ってマウントしたフォルダ内のファイル コンテンツを検索することができます。</p>
</div>


<h3>ワークグループ</h3>
<p>このオプションは、ネットワーク管理を行うためにシステムを特定ワークグループのメンバーとして割り当てます。</p>

<div class="section">

<h4>注意：</h4>
<ul>
<li>ワークグループの名前は 1～15 文字以内です｡ 名前に次の文字を使用することはできません：[ ] ; : &quot; < > * + = \ / | ? ,</li>
<li>OS X 10.9 を起動する Mac を使用していて、DiskStation が Windows ドメインに接続されている場合は、DiskStation ローカル ユーザー名の前に「<strong>localhost\</strong>」を付け加えてログインすると、Windows ファイル サービスを使って DiskStation に保管されているファイルにアクセスすることができます。</li>
</ul>
</div>

<h3 class="enable-bromolow enable-grantley enable-avoton enable-braswell enable-broadwell enable-kvmx64">前のバージョンへのアクセスを禁止する</h3>
<p class="enable-bromolow enable-grantley enable-avoton enable-braswell enable-broadwell enable-kvmx64">Windows Explorer で、共有フォルダ内の<strong> [前のバージョン] </strong>タブをクリックすると、フォルダやファイルのスナップショットにアクセスすることができ、これによって、管理者のサポートなしにデータを復元したり、コピーしたりすることが可能になります。<strong>[前のバージョンへのアクセスを禁止する]</strong> を選択すると、「前のバージョン」ページに情報が何も表示されなくなります。</p>

<div class="section enable-bromolow enable-grantley enable-avoton enable-braswell enable-broadwell enable-kvmx64"><h4>注意：</h4>
<ul>
	<li>ユーザーは、前のバージョンに対応したスナップショットが撮られ、そのユーザーアカウントが作成されており、対応するスナップショットが撮られた共有フォルダを読み出す許可が与えられているときにのみ、前のバージョンにアクセスすることができます。</li>
</ul>
</div>

<h3>転送ログを有効にする</h3>
<p>このオプションを選択すると、CIFS/SMB プロトコル（Windows ファイル転送プロトコルとも呼ばれます）を介してファイルやフォルダの作成、削除、読み取り、書き込み、移動、名前変更などのファイルアクセス操作にログインすることができます。</p>

<h3>詳細設定</h3>
<p><strong>[詳細設定]</strong> ボタンをクリックすると、以下ののオプションが表示されます。</p>
<ul>
<li><strong>WINS サーバー</strong>：Microsoft Windows インターネット ネーミング サービス (WINS) は、NetBIOS 名を IP アドレスとマッピングするサービスです。Windows ユーザーは、システムが WINS サーバーに登録するよう設定されている場合、TCP/IP ネットワーク上でシステムをより簡単に探し出すことができます。</li>
<li><strong>Windows ファイルサーバーの最大プロトコル数</strong>：ネットワークの構成によっては、DiskStation がサポートする最高のプロトコルレベルに設定することができます。
  <ul>
    <li><strong>SMB 2 を有効にする</strong>：SMB (Server Message Block) 2 は、Windows Vista 依頼サポートされており、SMB の強化バージョンです。SMB 2 はネットワーク パケット数を低減し、性能を高めるために、複数の SMB 操作を 1 つのリクエストにまとめることができます。</li>
    <li><strong>Large MTU で SMB 2 を有効にする</strong>：MTU (Maximum transmission unit) とは、通信プロトコルで通信できる最大データユニットのことです。1- または 10- ギガビット イーサネットなど、高速ネットワーク インターフェイスの特性を生かせるように、Large MTU は MTU を 1 メガバイト（MB） まで高めます。Large MTU を有効にすると、大きいファイルの転送速度と効率を高めることができますし、処理すべきパケット数も低減できます。</li>
    <li><strong>SMB 3 を有効にする</strong>：SMB 3 は、Windows 8 および Windows Server 2012 以降対応されています。これは SMB 2 の強化版です。SMB 3 は AES ベースのファイル暗号化転送に対応しており、ピア・トゥ・ピアのファイル転送時のセキュリティを強化します。</li>
</ul>
<div class="section">
  <h4>注意：</h4>
  <ul>
    <li>SMB 2 は、Windows Vista、Windows Server 2008 R2、Windows 7、およびそれ以降でサポートされます。</li>
    <li>Large MTU は、Windows Server 2008 R2、Windows 7、それ以降でサポートされます。</li>
    <li>Large MTU を Windows コンピュータで使用できるようにするには、コンピュータのレジストリ設定を変更する必要があります。詳細は、Microsoft テクニカルサポートをご覧ください（この<a href="http://technet.microsoft.com/en-us/library/ff625695(v=ws.10).aspx" target="_blank">記事</a>など）。</li>
    </ul>
</div>
<li><strong>転送暗号化モード</strong>：SMB 3 が有効になっていると、Windows ファイルサービスは転送暗号化を追加して転送時のセキュリティーを強化します。
  <ul>
    <li><b>無効</b>：転送暗号化は適用されません。</li>
    <li><b>自動</b>：転送暗号化はクライアントがこの機能に対応している場合にのみ適用されます。</li>
    <li><b>強制</b>：転送暗号化が常に適用されます。この場合、転送暗号化をサポートしないクライアントがは、Windows ファイル サービスを使用できないことになります。</li>
  </ul>
</li>
<div class="section">
  <h4>注意：</h4>
  <ul>
    <li>転送暗号化は、Windows 8、Windows Server 2012、およびそれ以降でサポートされます。</li>
    <li>転送暗号化が有効になっているときには、Windows ファイルサービスへの匿名ログオンはサポートされません。</li>
    <li>トランスポート暗号化が有効になっているときには、アプリケーションがタイムアウトしますので <b>[OpLock を無効にする]</b> にチェックしないでください。</li>
    </ul>
</div>
<li><strong>OpLock を無効にする</strong>：このオプションを選択すると、CIFS の「Opportunistic Locking」が無効になり、データベースアプリケーションがネットワークを介して DiskStation デバイスの共有フォルダにあるデータベースファイルに高速でアクセスできるようになります。</li>
<li>
  <strong>Local Master Browser を有効にする</strong>：1 つのサブネットに複数の Windows コンピュータがある場合、それらがネゴシエートして 1 台のコンピュータを「ローカルマスター ブラウザ」として選出します。&quot; Local Master Browser には、サブネット内の他のコンピュータおよびそれらの共有リソースのリストがあり、それらのリストを他のコンピュータと共有します。このオプションを選択すると、DiskStation が Local Master Browser になることができます。
</li>

<div class="section">
<h4>注意：</h4>
<p>この機能を有効にすると、ハードディスクのハイバネーションを無効にして、パスワードを持たない guest アカウントを有効にします。</p>
</div>


<li><strong>DirSort VFS モジュールを有効にする</strong>：フォルダ名を並べ替えて、アルファベット順にリストします。このオプションを有効にすると、システムの性能が影響を受けます。</li>

<li><strong>ファイルを拒否</strong>：指定条件に基づいてファイルを隠します。条件にはワイルドカード (*) を使用でき、複数のエントリはスラッシュ (/) で区切らなければなりません。例えば：<i>/abc*/*.txt/*.conf/</i>。このオプションを有効にすると、システムの性能が影響を受けます。</li>

<li><strong>共有フォルダ内の象徴的なリンクを許可する</strong>：このオプションを有効にすると、シンボリック リンクを同じ共有フォルダ内のファイルかフォルダに指定できます。シンボリック リンクは DSM 端末を使って作成できます。</li>

<li><strong>共有フォルダに亘る象徴的なリンクを許可する</strong>：このオプションを有効にすると、シンボリック リンクを別の共有フォルダ内にあるファイルやフォルダに指定できます。シンボリック リンクは DSM 端末を使って作成できます。このオプションを有効にすると、アクセス権のないユーザーもシンボリック リンクのターゲットである共有フォルダを見たり、アクセスしたりできるようになる場合があることにご注意ください。</li>

<li><strong>MSDFS VFS モジュールを有効にする</strong>：シンボリック リンクを別の SMB サーバー上にあるファイルやフォルダに指定できます。Windows XP などの古い Windows バージョンを使用している場合は、このオプションを有効にする前に、クライアントおよび DiskStation は、Windows ドメインに加入する必要があります。MSDFS リンクを作成する方法については、<a href="http://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/msdfs.html" target=_blank>こちら</a>をご覧ください。クライアント デバイスのキャッシュは、このオプションを無効にした後で消去すべきです。そうしなければ、通常の正常に影響を与える場合があります。</li>

<li><strong>同一 IP アドレスからの複数接続を無効にする</strong>：このオプションを有効にすると、DiskStation は、 Windows ファイルサービスを使って、クライアントから 1 IP アドレスにつき 1 つの接続のみを許可します。同じ IP アドレスを持つ複数のクライアントが Windows ファイルサービスを使用している場合は、DiskStation は、最新の接続だけを維持し、古い接続を切ります。NAT 環境では、クライアントが 1 つの IP アドレスを使用している場合があります。この場合、このオプションを有効にすると、正常に動作しなくなる場合があります。</li>

<li><strong>デバッグ ログを収集</strong>：デバッグを目的として、より詳しいログが保管されます。このオプションを有効にすると、システムの性能が影響を受けます。</li>
<li><strong>デフォルトの UNIX 権限を適用する</strong>：ファイルやフォルダをアップロード、または作成する場合、デフォルトの UNIX パーミッションが適用されます。ファイルの UNIX パーミッションは 744、フォルダは 755 です。このオプションを無効にすると、ファイルとフォルダの UNIX パーミッションは 777 になります。</li>
<div class="section enable-eds14">
<h4>注意：</h4>
<ul>
<li>このオプションを有効にすると、プロトコルによってパーミッションが異なるという状況が発生するおそれがあります。このような状況を回避するには、このオプションを無効にしておいてください。</li>
</ul>
</div>
<div class="section disable-eds14">
<h4>注意：</h4>
<ul>
  <li>Windows ACL が有効になった共有フォルダ（外部ドライブの「photo」フォルダと共有フォルダを除くすべての共有フォルダ）の場合は、Linux または FTP クライアントで <strong>chmod</strong> コマンドを実行してフォルダやファイルのパーミッションタイプを Windows ACL から UNIX に変更してください。</li>
  <li>このオプションを有効にすると、プロトコルによってパーミッションが異なるという状況が発生するおそれがあります。このような状況を回避するには、このオプションを無効にしておいてください。</li>
</ul>
</div>
<li><b>ファイルを作成するとき、ディスクスペースを予約しない</b>：このオプションを有効にすると、DiskStation でファイルを作成するとき、ディスクスペースを予約させません。</li>
<li><strong>SMB キャッシュをクリア</strong>：このボタンをクリックすると、問題を解決するために、以下の SMB キャッシュ ファイルが削除されます。
  <ul>

<li>/var/cache/samba/netsamlogon_cache.tdb</li>
<li>/var/lib/samba/winbindd_cache.tdb</li>
<li>/var/lib/samba/share_info.tdb</li>
<li>/var/lib/samba/registry.tdb</li>
<li>/run/samba/connections.tdb</li>
<li>/run/samba/gencacche.tdb</li>
<li>/run/samba/gencache_notran.tdb</li>
</ul>
</li>

</ul>

</body>
</html>
