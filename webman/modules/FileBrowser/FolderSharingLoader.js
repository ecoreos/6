/* Copyright (c) 2016 Synology Inc. All rights reserved. */

var debugJsFiles=["../synoSDSjslib/js/FeatureTest.js?v={0}","../synoSDSjslib/js/WebAPI.ErrorCode.js?v={0}","../synoSDSjslib/js/jslib/Relay.js?v={0}","../synoSDSjslib/js/jslib/Utils.js?v={0}","../synoSDSjslib/js/Gesture.js?v={0}","../synoSDSjslib/js/GestureMgr.js?v={0}","../synoSDSjslib/js/extension.js?v={0}","../webman/modules/FileBrowser/webfm/webUI/webfmutils.js?v={0}","../webman/modules/FileBrowser/webfm/webUI/modules/PathBar.js?v={0}","../webman/modules/FileBrowser/webfm/webUI/modules/FocusGridPlugin.js?v={0}","../webman/modules/FileBrowser/webfm/webUI/modules/GridFlexPlugin.js?v={0}","../webman/modules/FileBrowser/webfm/webUI/modules/SelectAllRowSelectionModel.js?v={0}","../webman/modules/Utils/lazyDataView.js?v={0}","../synoSDSjslib/js/WebAPI.js?v={0}","../webman/modules/FileBrowser/webfm/webUI/thumbnailsView.js?v={0}","../webman/modules/FileBrowser/webfm/folderSharing/js/folderSharingExtension.js?v={0}","../webman/modules/FileBrowser/webfm/folderSharing/js/folderSharingDownloadAction.js?v={0}","../webman/modules/FileBrowser/webfm/folderSharing/js/folderSharingCmp.js?v={0}","../webman/modules/FileBrowser/webfm/folderSharing/js/folderSharingToolbar.js?v={0}","../webman/modules/FileBrowser/webfm/folderSharing/js/folderSharingUI.js?v={0}"];var jsFiles=["../webman/modules/FileBrowser/FolderSharingBase.js?v={0}","../webman/modules/FileBrowser/FolderSharing.js?v={0}"];var count=0;var loadJS=function(d,e,c){var a=document.createElement("script");a.type="text/javascript";a.src=d;if(a.readyState){a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete"){a.onreadystatechange=null;e()}}}else{a.onload=function(){e()}}a.async=true;var b=document.getElementsByTagName("head")[0];b.appendChild(a)};var urlParam=Ext.urlDecode(window.location.search.substr(1)),enableDebug=urlParam.jsDebug,noCache=urlParam.noCache;var folderSharingJSLoader=function(b,g,c){var e=enableDebug?debugJsFiles:jsFiles,d=e.length,a=noCache,f=e[count];if(count===d){g()}if(!f){return}loadJS(String.format(f,enableDebug?b+Math.random():(a?b+Math.random():b)),function(){count++;folderSharingJSLoader(b,g,c)})};window._S=function(a){SYNO.SDS.Session={version:g_Version,lang:g_Lang,folderSharingURL:g_MD5,folderSharingPath:g_FolderPath,RELURL:"../webman/modules/FileBrowser/webfm/"};return SYNO.SDS.Session[a]};var init=function(){SYNO.SDS.GestureMgr=new SYNO.SDS._GestureMgr();SYNO.API.currentManager=new SYNO.API.Manager();SYNO.API.currentManager.baseURL="../webapi";SYNO.API.currentManager.queryAPI("SYNO.FolderSharing.",function(){var a=new SYNO.FileStation.FolderSharingWindow();a.toggleMaximize();a.show()})};Ext.onReady(function(){folderSharingJSLoader(g_Version,init)});