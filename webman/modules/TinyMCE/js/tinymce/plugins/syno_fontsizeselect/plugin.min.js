/* Copyright (c) 2016 Synology Inc. All rights reserved. */

tinymce.PluginManager.add("syno_fontsizeselect",function(c,b){var a=this;c.addButton("syno_fontsizeselect",function(){a.createMenu=function(j){var k=0,n=[];if(!j){return}for(k=0;k<j.length;k++){var m=j[k];var l={text:m.text,value:m.value};n.push(l)}return n};a.setActive=function(j,l){var k=0;a.value=l;for(k=0;k<j.length;k++){if(j[k].value()===l){j[k].active(true)}else{j[k].active(false)}}};a.createListBoxChangeHandler=function(i,j){return function(){var k=this;c.on("nodeChange",function(q){var m=c.formatter;var l=0,p="";var o=q.parents[0];for(l=0;l<i.length;l++){var n=i[l];if(j){if(m.matchNode(o,j,{value:n.value})){p=n.value;break}}else{if(m.matchNode(o,n.value)){p=n.value;break}}}k.value(p);a.value=p})}};var e=0,d=[],h="10pt 12pt 14pt 16pt 18pt 24pt 36pt";var g=c.settings.fontsize_formats||h;g=g.split(" ");for(e=0;e<g.length;e++){var f=g[e];d.push({text:f,value:f})}return{type:"menubutton",icon:"synofontsizeselect",tooltip:"Font Size",menu:a.createMenu(d),fixedWidth:false,onPostRender:a.createListBoxChangeHandler(d,"fontsize"),onselect:function(i){if(i.control.settings.value){a.setActive(this.menu.items(),i.control.settings.value);c.execCommand("FontSize",false,i.control.settings.value)}},onClick:function(){a.setActive(this.menu.items(),a.value)}}})});