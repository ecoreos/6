/* Copyright (c) 2016 Synology Inc. All rights reserved. */

if(!document.createElement("canvas").getContext){(function(){var ae=Math;var o=ae.round;var n=ae.sin;var D=ae.cos;var K=ae.abs;var Q=ae.sqrt;var e=10;var g=e/2;var C=+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1];function B(){return this.context_||(this.context_=new G(this))}var v=Array.prototype.slice;function h(m,Z,aj){var j=v.call(arguments,2);return function(){return m.apply(Z,j.concat(v.call(arguments)))}}function ai(j){return String(j).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function ac(Z,m,j){if(!Z.namespaces[m]){Z.namespaces.add(m,j,"#default#VML")}}function U(m){ac(m,"g_vml_","urn:schemas-microsoft-com:vml");ac(m,"g_o_","urn:schemas-microsoft-com:office:office");if(!m.styleSheets.ex_canvas_){var j="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}";head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css";style.id="ex_canvas_";if(style.styleSheet){style.styleSheet.cssText=j}else{style.appendChild(document.createTextNode(j))}head.appendChild(style)}}U(document);var f={init:function(j){var m=j||document;m.createElement("canvas");m.attachEvent("onreadystatechange",h(this.init_,this,m))},init_:function(Z){var m=Z.getElementsByTagName("canvas");for(var j=0;j<m.length;j++){this.initElement(m[j])}},initElement:function(m){if(!m.getContext){m.getContext=B;U(m.ownerDocument);m.innerHTML="";m.attachEvent("onpropertychange",A);m.attachEvent("onresize",aa);var j=m.attributes;if(j.width&&j.width.specified){m.style.width=j.width.nodeValue+"px"}else{m.width=m.clientWidth}if(j.height&&j.height.specified){m.style.height=j.height.nodeValue+"px"}else{m.height=m.clientHeight}}return m}};function A(m){var j=m.srcElement;switch(m.propertyName){case"width":j.getContext().clearRect();j.style.width=j.attributes.width.nodeValue+"px";if(j.firstChild){j.firstChild.style.width=j.clientWidth+"px"}break;case"height":j.getContext().clearRect();j.style.height=j.attributes.height.nodeValue+"px";if(j.firstChild){j.firstChild.style.height=j.clientHeight+"px"}break}}function aa(m){var j=m.srcElement;if(j.firstChild){j.firstChild.style.width=j.clientWidth+"px";j.firstChild.style.height=j.clientHeight+"px"}}f.init();var l=[];for(var ah=0;ah<16;ah++){for(var ag=0;ag<16;ag++){l[ah*16+ag]=ah.toString(16)+ag.toString(16)}}function E(){return[[1,0,0],[0,1,0],[0,0,1]]}function M(aj,Z){var m=E();for(var j=0;j<3;j++){for(var am=0;am<3;am++){var ak=0;for(var al=0;al<3;al++){ak+=aj[j][al]*Z[al][am]}m[j][am]=ak}}return m}function x(m,j){j.fillStyle=m.fillStyle;j.lineCap=m.lineCap;j.lineJoin=m.lineJoin;j.lineWidth=m.lineWidth;j.miterLimit=m.miterLimit;j.shadowBlur=m.shadowBlur;j.shadowColor=m.shadowColor;j.shadowOffsetX=m.shadowOffsetX;j.shadowOffsetY=m.shadowOffsetY;j.strokeStyle=m.strokeStyle;j.globalAlpha=m.globalAlpha;j.font=m.font;j.textAlign=m.textAlign;j.textBaseline=m.textBaseline;j.arcScaleX_=m.arcScaleX_;j.arcScaleY_=m.arcScaleY_;j.lineScale_=m.lineScale_}var b={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"};function P(m){var aj=m.indexOf("(",3);var j=m.indexOf(")",aj+1);var Z=m.substring(aj+1,j).split(",");if(Z.length!=4||m.charAt(3)!="a"){Z[3]=1}return Z}function d(j){return parseFloat(j)/100}function t(m,Z,j){return Math.min(j,Math.max(Z,m))}function L(ak){var j,am,an,al,ao,aj;al=parseFloat(ak[0])/360%360;if(al<0){al++}ao=t(d(ak[1]),0,1);aj=t(d(ak[2]),0,1);if(ao==0){j=am=an=aj}else{var m=aj<0.5?aj*(1+ao):aj+ao-aj*ao;var Z=2*aj-m;j=a(Z,m,al+1/3);am=a(Z,m,al);an=a(Z,m,al-1/3)}return"#"+l[Math.floor(j*255)]+l[Math.floor(am*255)]+l[Math.floor(an*255)]}function a(m,j,Z){if(Z<0){Z++}if(Z>1){Z--}if(6*Z<1){return m+(j-m)*6*Z}else{if(2*Z<1){return j}else{if(3*Z<2){return m+(j-m)*(2/3-Z)*6}else{return m}}}}var F={};function I(j){if(j in F){return F[j]}var ak,aj=1;j=String(j);if(j.charAt(0)=="#"){ak=j}else{if(/^rgb/.test(j)){var Z=P(j);var ak="#",al;for(var m=0;m<3;m++){if(Z[m].indexOf("%")!=-1){al=Math.floor(d(Z[m])*255)}else{al=+Z[m]}ak+=l[t(al,0,255)]}aj=+Z[3]}else{if(/^hsl/.test(j)){var Z=P(j);ak=L(Z);aj=Z[3]}else{ak=b[j]||j}}}return F[j]={color:ak,alpha:aj}}var q={style:"normal",variant:"normal",weight:"normal",size:10,family:"sans-serif"};var O={};function H(j){if(O[j]){return O[j]}var aj=document.createElement("div");var Z=aj.style;try{Z.font=j}catch(m){}return O[j]={style:Z.fontStyle||q.style,variant:Z.fontVariant||q.variant,weight:Z.fontWeight||q.weight,size:Z.fontSize||q.size,family:Z.fontFamily||q.family}}function w(Z,m){var j={};for(var al in Z){j[al]=Z[al]}var ak=parseFloat(m.currentStyle.fontSize),aj=parseFloat(Z.size);if(typeof Z.size=="number"){j.size=Z.size}else{if(Z.size.indexOf("px")!=-1){j.size=aj}else{if(Z.size.indexOf("em")!=-1){j.size=ak*aj}else{if(Z.size.indexOf("%")!=-1){j.size=(ak/100)*aj}else{if(Z.size.indexOf("pt")!=-1){j.size=aj/0.75}else{j.size=ak}}}}}return j}function af(j){return j.style+" "+j.variant+" "+j.weight+" "+j.size+"px "+j.family}var u={butt:"flat",round:"round"};function V(j){return u[j]||"square"}function G(j){this.m_=E();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=e*1;this.globalAlpha=1;this.font="10px sans-serif";this.textAlign="left";this.textBaseline="alphabetic";this.canvas=j;var Z="width:"+j.clientWidth+"px;height:"+j.clientHeight+"px;overflow:hidden;position:absolute";var m=j.ownerDocument.createElement("div");m.style.cssText=Z;j.appendChild(m);var aj=m.cloneNode(false);aj.style.backgroundColor="red";aj.style.filter="alpha(opacity=0)";j.appendChild(aj);this.element_=m;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var r=G.prototype;r.clearRect=function(){if(this.textMeasureEl_){this.textMeasureEl_.removeNode(true);this.textMeasureEl_=null}this.element_.innerHTML=""};r.beginPath=function(){this.currentPath_=[]};r.moveTo=function(m,j){var Z=Y(this,m,j);this.currentPath_.push({type:"moveTo",x:Z.x,y:Z.y});this.currentX_=Z.x;this.currentY_=Z.y};r.lineTo=function(m,j){var Z=Y(this,m,j);this.currentPath_.push({type:"lineTo",x:Z.x,y:Z.y});this.currentX_=Z.x;this.currentY_=Z.y};r.bezierCurveTo=function(Z,m,ao,an,am,ak){var j=Y(this,am,ak);var al=Y(this,Z,m);var aj=Y(this,ao,an);N(this,al,aj,j)};function N(j,aj,Z,m){j.currentPath_.push({type:"bezierCurveTo",cp1x:aj.x,cp1y:aj.y,cp2x:Z.x,cp2y:Z.y,x:m.x,y:m.y});j.currentX_=m.x;j.currentY_=m.y}r.quadraticCurveTo=function(am,Z,m,j){var al=Y(this,am,Z);var ak=Y(this,m,j);var an={x:this.currentX_+2/3*(al.x-this.currentX_),y:this.currentY_+2/3*(al.y-this.currentY_)};var aj={x:an.x+(ak.x-this.currentX_)/3,y:an.y+(ak.y-this.currentY_)/3};N(this,an,aj,ak)};r.arc=function(ap,an,ao,ak,m,Z){ao*=e;var au=Z?"at":"wa";var aq=ap+D(ak)*ao-g;var at=an+n(ak)*ao-g;var j=ap+D(m)*ao-g;var ar=an+n(m)*ao-g;if(aq==j&&!Z){aq+=0.125}var aj=Y(this,ap,an);var am=Y(this,aq,at);var al=Y(this,j,ar);this.currentPath_.push({type:au,x:aj.x,y:aj.y,radius:ao,xStart:am.x,yStart:am.y,xEnd:al.x,yEnd:al.y})};r.rect=function(Z,m,j,aj){this.moveTo(Z,m);this.lineTo(Z+j,m);this.lineTo(Z+j,m+aj);this.lineTo(Z,m+aj);this.closePath()};r.strokeRect=function(Z,m,j,aj){var ak=this.currentPath_;this.beginPath();this.moveTo(Z,m);this.lineTo(Z+j,m);this.lineTo(Z+j,m+aj);this.lineTo(Z,m+aj);this.closePath();this.stroke();this.currentPath_=ak};r.fillRect=function(Z,m,j,aj){var ak=this.currentPath_;this.beginPath();this.moveTo(Z,m);this.lineTo(Z+j,m);this.lineTo(Z+j,m+aj);this.lineTo(Z,m+aj);this.closePath();this.fill();this.currentPath_=ak};r.createLinearGradient=function(m,aj,j,Z){var ak=new X("gradient");ak.x0_=m;ak.y0_=aj;ak.x1_=j;ak.y1_=Z;return ak};r.createRadialGradient=function(aj,al,Z,m,ak,j){var am=new X("gradientradial");am.x0_=aj;am.y0_=al;am.r0_=Z;am.x1_=m;am.y1_=ak;am.r1_=j;return am};r.drawImage=function(aw,Z){var ao,am,aq,aD,au,ar,ay,aF;var ap=aw.runtimeStyle.width;var av=aw.runtimeStyle.height;aw.runtimeStyle.width="auto";aw.runtimeStyle.height="auto";var an=aw.width;var aB=aw.height;aw.runtimeStyle.width=ap;aw.runtimeStyle.height=av;if(arguments.length==3){ao=arguments[1];am=arguments[2];au=ar=0;ay=aq=an;aF=aD=aB}else{if(arguments.length==5){ao=arguments[1];am=arguments[2];aq=arguments[3];aD=arguments[4];au=ar=0;ay=an;aF=aB}else{if(arguments.length==9){au=arguments[1];ar=arguments[2];ay=arguments[3];aF=arguments[4];ao=arguments[5];am=arguments[6];aq=arguments[7];aD=arguments[8]}else{throw Error("Invalid number of arguments")}}}var aE=Y(this,ao,am);var aj=ay/2;var m=aF/2;var aC=[];var j=10;var al=10;aC.push(" <g_vml_:group",' coordsize="',e*j,",",e*al,'"',' coordorigin="0,0"',' style="width:',j,"px;height:",al,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var ak=[];ak.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",o(aE.x/e),",","Dy=",o(aE.y/e),"");var aA=aE;var az=Y(this,ao+aq,am);var ax=Y(this,ao,am+aD);var at=Y(this,ao+aq,am+aD);aA.x=ae.max(aA.x,az.x,ax.x,at.x);aA.y=ae.max(aA.y,az.y,ax.y,at.y);aC.push("padding:0 ",o(aA.x/e),"px ",o(aA.y/e),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",ak.join(""),", sizingmethod='clip');")}else{aC.push("top:",o(aE.y/e),"px;left:",o(aE.x/e),"px;")}aC.push(' ">','<g_vml_:image src="',aw.src,'"',' style="width:',e*aq,"px;"," height:",e*aD,'px"',' cropleft="',au/an,'"',' croptop="',ar/aB,'"',' cropright="',(an-au-ay)/an,'"',' cropbottom="',(aB-ar-aF)/aB,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",aC.join(""))};r.stroke=function(ao){var am=[];var Z=false;var m=10;var ap=10;am.push("<g_vml_:shape",' filled="',!!ao,'"',' style="position:absolute;width:',m,"px;height:",ap,'px;"',' coordorigin="0,0"',' coordsize="',e*m,",",e*ap,'"',' stroked="',!ao,'"',' path="');var aq=false;var aj={x:null,y:null};var an={x:null,y:null};for(var ak=0;ak<this.currentPath_.length;ak++){var j=this.currentPath_[ak];var al;switch(j.type){case"moveTo":al=j;am.push(" m ",o(j.x),",",o(j.y));break;case"lineTo":am.push(" l ",o(j.x),",",o(j.y));break;case"close":am.push(" x ");j=null;break;case"bezierCurveTo":am.push(" c ",o(j.cp1x),",",o(j.cp1y),",",o(j.cp2x),",",o(j.cp2y),",",o(j.x),",",o(j.y));break;case"at":case"wa":am.push(" ",j.type," ",o(j.x-this.arcScaleX_*j.radius),",",o(j.y-this.arcScaleY_*j.radius)," ",o(j.x+this.arcScaleX_*j.radius),",",o(j.y+this.arcScaleY_*j.radius)," ",o(j.xStart),",",o(j.yStart)," ",o(j.xEnd),",",o(j.yEnd));break}if(j){if(aj.x==null||j.x<aj.x){aj.x=j.x}if(an.x==null||j.x>an.x){an.x=j.x}if(aj.y==null||j.y<aj.y){aj.y=j.y}if(an.y==null||j.y>an.y){an.y=j.y}}}am.push(' ">');if(!ao){z(this,am)}else{J(this,am,aj,an)}am.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",am.join(""))};function z(Z,al){var m=I(Z.strokeStyle);var aj=m.color;var ak=m.alpha*Z.globalAlpha;var j=Z.lineScale_*Z.lineWidth;if(j<1){ak*=j}al.push("<g_vml_:stroke",' opacity="',ak,'"',' joinstyle="',Z.lineJoin,'"',' miterlimit="',Z.miterLimit,'"',' endcap="',V(Z.lineCap),'"',' weight="',j,'px"',' color="',aj,'" />')}function J(av,am,aO,aw){var an=av.fillStyle;var aF=av.arcScaleX_;var aE=av.arcScaleY_;var j=aw.x-aO.x;var Z=aw.y-aO.y;if(an instanceof X){var ar=0;var aJ={x:0,y:0};var aB=0;var aq=1;if(an.type_=="gradient"){var ap=an.x0_/aF;var m=an.y0_/aE;var ao=an.x1_/aF;var aQ=an.y1_/aE;var aN=Y(av,ap,m);var aM=Y(av,ao,aQ);var ak=aM.x-aN.x;var aj=aM.y-aN.y;ar=Math.atan2(ak,aj)*180/Math.PI;if(ar<0){ar+=360}if(ar<0.000001){ar=0}}else{var aN=Y(av,an.x0_,an.y0_);aJ={x:(aN.x-aO.x)/j,y:(aN.y-aO.y)/Z};j/=aF*e;Z/=aE*e;var aH=ae.max(j,Z);aB=2*an.r0_/aH;aq=2*an.r1_/aH-aB}var az=an.colors_;az.sort(function(aS,aR){return aS.offset-aR.offset});var au=az.length;var ay=az[0].color;var ax=az[au-1].color;var aD=az[0].alpha*av.globalAlpha;var aC=az[au-1].alpha*av.globalAlpha;var aI=[];for(var aL=0;aL<au;aL++){var at=az[aL];aI.push(at.offset*aq+aB+" "+at.color)}am.push('<g_vml_:fill type="',an.type_,'"',' method="none" focus="100%"',' color="',ay,'"',' color2="',ax,'"',' colors="',aI.join(","),'"',' opacity="',aC,'"',' g_o_:opacity2="',aD,'"',' angle="',ar,'"',' focusposition="',aJ.x,",",aJ.y,'" />')}else{if(an instanceof W){if(j&&Z){var al=-aO.x;var aG=-aO.y;am.push("<g_vml_:fill",' position="',al/j*aF*aF,",",aG/Z*aE*aE,'"',' type="tile"',' src="',an.src_,'" />')}}else{var aP=I(av.fillStyle);var aA=aP.color;var aK=aP.alpha*av.globalAlpha;am.push('<g_vml_:fill color="',aA,'" opacity="',aK,'" />')}}}r.fill=function(){this.stroke(true)};r.closePath=function(){this.currentPath_.push({type:"close"})};function Y(Z,ak,aj){var j=Z.m_;return{x:e*(ak*j[0][0]+aj*j[1][0]+j[2][0])-g,y:e*(ak*j[0][1]+aj*j[1][1]+j[2][1])-g}}r.save=function(){var j={};x(this,j);this.aStack_.push(j);this.mStack_.push(this.m_);this.m_=M(E(),this.m_)};r.restore=function(){if(this.aStack_.length){x(this.aStack_.pop(),this);this.m_=this.mStack_.pop()}};function k(j){return isFinite(j[0][0])&&isFinite(j[0][1])&&isFinite(j[1][0])&&isFinite(j[1][1])&&isFinite(j[2][0])&&isFinite(j[2][1])}function ad(Z,j,aj){if(!k(j)){return}Z.m_=j;if(aj){var ak=j[0][0]*j[1][1]-j[0][1]*j[1][0];Z.lineScale_=Q(K(ak))}}r.translate=function(Z,m){var j=[[1,0,0],[0,1,0],[Z,m,1]];ad(this,M(j,this.m_),false)};r.rotate=function(m){var aj=D(m);var Z=n(m);var j=[[aj,Z,0],[-Z,aj,0],[0,0,1]];ad(this,M(j,this.m_),false)};r.scale=function(Z,m){this.arcScaleX_*=Z;this.arcScaleY_*=m;var j=[[Z,0,0],[0,m,0],[0,0,1]];ad(this,M(j,this.m_),true)};r.transform=function(ak,aj,am,al,m,j){var Z=[[ak,aj,0],[am,al,0],[m,j,1]];ad(this,M(Z,this.m_),true)};r.setTransform=function(al,ak,an,am,aj,Z){var j=[[al,ak,0],[an,am,0],[aj,Z,1]];ad(this,j,true)};r.drawText_=function(ar,ap,ao,av,an){var au=this.m_,ay=1000,Z=0,ax=ay,am={x:0,y:0},al=[];var j=w(H(this.font),this.element_);var aj=af(j);var az=this.element_.currentStyle;var ak=this.textAlign.toLowerCase();switch(ak){case"left":case"center":case"right":break;case"end":ak=az.direction=="ltr"?"right":"left";break;case"start":ak=az.direction=="rtl"?"right":"left";break;default:ak="left"}switch(this.textBaseline){case"hanging":case"top":am.y=j.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":am.y=-j.size/2.25;break}switch(ak){case"right":Z=ay;ax=0.05;break;case"center":Z=ax=ay/2;break}var aw=Y(this,ap+am.x,ao+am.y);al.push('<g_vml_:line from="',-Z,' 0" to="',ax,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!an,'" stroked="',!!an,'" style="position:absolute;width:1px;height:1px;">');if(an){z(this,al)}else{J(this,al,{x:-Z,y:0},{x:ax,y:j.size})}var at=au[0][0].toFixed(3)+","+au[1][0].toFixed(3)+","+au[0][1].toFixed(3)+","+au[1][1].toFixed(3)+",0,0";var aq=o(aw.x/e)+","+o(aw.y/e);al.push('<g_vml_:skew on="t" matrix="',at,'" ',' offset="',aq,'" origin="',Z,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',ai(ar),'" style="v-text-align:',ak,";font:",ai(aj),'" /></g_vml_:line>');this.element_.insertAdjacentHTML("beforeEnd",al.join(""))};r.fillText=function(Z,j,aj,m){this.drawText_(Z,j,aj,m,false)};r.strokeText=function(Z,j,aj,m){this.drawText_(Z,j,aj,m,true)};r.measureText=function(Z){if(!this.textMeasureEl_){var j='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",j);this.textMeasureEl_=this.element_.lastChild}var m=this.element_.ownerDocument;this.textMeasureEl_.innerHTML="";this.textMeasureEl_.style.font=this.font;this.textMeasureEl_.appendChild(m.createTextNode(Z));return{width:this.textMeasureEl_.offsetWidth}};r.clip=function(){};r.arcTo=function(){};r.createPattern=function(m,j){return new W(m,j)};function X(j){this.type_=j;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}X.prototype.addColorStop=function(m,j){j=I(j);this.colors_.push({offset:m,color:j.color,alpha:j.alpha})};function W(m,j){T(m);switch(j){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=j;break;default:R("SYNTAX_ERR")}this.src_=m.src;this.width_=m.width;this.height_=m.height}function R(j){throw new S(j)}function T(j){if(!j||j.nodeType!=1||j.tagName!="IMG"){R("TYPE_MISMATCH_ERR")}if(j.readyState!="complete"){R("INVALID_STATE_ERR")}}function S(j){this.code=this[j];this.message=j+": DOM Exception "+this.code}var ab=S.prototype=new Error;ab.INDEX_SIZE_ERR=1;ab.DOMSTRING_SIZE_ERR=2;ab.HIERARCHY_REQUEST_ERR=3;ab.WRONG_DOCUMENT_ERR=4;ab.INVALID_CHARACTER_ERR=5;ab.NO_DATA_ALLOWED_ERR=6;ab.NO_MODIFICATION_ALLOWED_ERR=7;ab.NOT_FOUND_ERR=8;ab.NOT_SUPPORTED_ERR=9;ab.INUSE_ATTRIBUTE_ERR=10;ab.INVALID_STATE_ERR=11;ab.SYNTAX_ERR=12;ab.INVALID_MODIFICATION_ERR=13;ab.NAMESPACE_ERR=14;ab.INVALID_ACCESS_ERR=15;ab.VALIDATION_ERR=16;ab.TYPE_MISMATCH_ERR=17;G_vmlCanvasManager=f;CanvasRenderingContext2D=G;CanvasGradient=X;CanvasPattern=W;DOMException=S})()}(function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var e=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];function b(m){var h,k,f;var l,j,g;f=m.length;k=0;h="";while(k<f){l=m.charCodeAt(k++)&255;if(k==f){h+=a.charAt(l>>2);h+=a.charAt((l&3)<<4);h+="==";break}j=m.charCodeAt(k++);if(k==f){h+=a.charAt(l>>2);h+=a.charAt(((l&3)<<4)|((j&240)>>4));h+=a.charAt((j&15)<<2);h+="=";break}g=m.charCodeAt(k++);h+=a.charAt(l>>2);h+=a.charAt(((l&3)<<4)|((j&240)>>4));h+=a.charAt(((j&15)<<2)|((g&192)>>6));h+=a.charAt(g&63)}return h}function d(n){var m,l,j,g;var k,f,h;f=n.length;k=0;h="";while(k<f){do{m=e[n.charCodeAt(k++)&255]}while(k<f&&m==-1);if(m==-1){break}do{l=e[n.charCodeAt(k++)&255]}while(k<f&&l==-1);if(l==-1){break}h+=String.fromCharCode((m<<2)|((l&48)>>4));do{j=n.charCodeAt(k++)&255;if(j==61){return h}j=e[j]}while(k<f&&j==-1);if(j==-1){break}h+=String.fromCharCode(((l&15)<<4)|((j&60)>>2));do{g=n.charCodeAt(k++)&255;if(g==61){return h}g=e[g]}while(k<f&&g==-1);if(g==-1){break}h+=String.fromCharCode(((j&3)<<6)|g)}return h}if(!window.btoa){window.btoa=b}if(!window.atob){window.atob=d}})();var Canvas2Image=(function(){var j=document.createElement("canvas"),n=String.fromCharCode,g="image/octet-stream",m=false;if(!j.getContext){return{saveAsBMP:function(){},saveAsPNG:function(){},saveAsJPEG:function(){}}}var e=!!(j.getContext("2d").getImageData),f=!!(j.toDataURL),a=!!(window.btoa);var q=function(r){var t=parseInt(r.width),u=parseInt(r.height);return r.getContext("2d").getImageData(0,0,t,u)};var d=function(u){var t,r,v="";if(typeof u=="string"){v=u}else{r=u;for(t=0;t<r.length;t++){v+=n(r[t])}}return btoa(v)};var l=function(u){var B="",v=u.width,r=u.height;B+="BM";var F=v*r*4+54;B+=n(F%256);F=Math.floor(F/256);B+=n(F%256);F=Math.floor(F/256);B+=n(F%256);F=Math.floor(F/256);B+=n(F%256);B+=n(0,0,0,0,54,0,0,0);B+=n(40,0,0,0);var t=v;B+=n(t%256);t=Math.floor(t/256);B+=n(t%256);t=Math.floor(t/256);B+=n(t%256);t=Math.floor(t/256);B+=n(t%256);var J=r;B+=n(J%256);J=Math.floor(J/256);B+=n(J%256);J=Math.floor(J/256);B+=n(J%256);J=Math.floor(J/256);B+=n(J%256);B+=n(1,0,32,0);B+=n(0,0,0,0);var A=v*r*4;B+=n(A%256);A=Math.floor(A/256);B+=n(A%256);A=Math.floor(A/256);B+=n(A%256);A=Math.floor(A/256);B+=n(A%256);B+=n(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var D=u.data,E="",G,I,H=r,z,w,C;do{w=v*(H-1)*4;C="";for(I=0;I<v;I++){z=4*I;C+=n(D[w+z+2],D[w+z+1],D[w+z],D[w+z+3])}E+=C}while(--H);return d(B+E)};var b=function(r){if(!window.open(r)){document.location.href=r}};var k=function(t,r){return"data:"+r+";base64,"+t};var o=function(r){var t=document.createElement("img");t.src=r;return t};var h=function(t,u,w){if(u&&w){var v=document.createElement("canvas");v.width=u;v.height=w;v.style.width=u+"px";v.style.height=w+"px";var r=v.getContext("2d");r.drawImage(t,0,0,t.width,t.height,0,0,u,u);return v}return t};return{saveAsPNG:function(t,r,u,z){if(!f){return false}var v=h(t,u,z),x="image/png",w=v.toDataURL(x);if(r){return o(w)}else{b(m?w.replace(x,g):w)}return true},saveAsJPEG:function(t,r,u,z){if(!f){return false}var v=h(t,u,z),x="image/jpeg",w=v.toDataURL(x);if(w.indexOf(x)!=5){return false}if(r){return o(w)}else{b(m?w.replace(x,g):w)}return true},saveAsBMP:function(u,t,v,z){if(!(f&&e&&a)){return false}var w=h(u,v,z),x="image/bmp",A=q(w),r=l(A);if(t){return o(k(r,x))}else{b(k(r,x))}return true}}})();var CanvasText={letters:{"\n":{width:-1,points:[]}," ":{width:10,points:[]},"!":{width:10,points:[[5,21],[5,7],null,[5,2],[4,1],[5,0],[6,1],[5,2]]},'"':{width:16,points:[[4,21],[4,14],null,[12,21],[12,14]]},"#":{width:21,points:[[11,25],[4,-7],null,[17,25],[10,-7],null,[4,12],[18,12],null,[3,6],[17,6]]},"$":{width:20,points:[[8,25],[8,-4],null,[12,25],[12,-4],null,[17,18],[15,20],[12,21],[8,21],[5,20],[3,18],[3,16],[4,14],[5,13],[7,12],[13,10],[15,9],[16,8],[17,6],[17,3],[15,1],[12,0],[8,0],[5,1],[3,3]]},"%":{width:24,points:[[21,21],[3,0],null,[8,21],[10,19],[10,17],[9,15],[7,14],[5,14],[3,16],[3,18],[4,20],[6,21],[8,21],null,[17,7],[15,6],[14,4],[14,2],[16,0],[18,0],[20,1],[21,3],[21,5],[19,7],[17,7]]},"&":{width:26,points:[[23,12],[23,13],[22,14],[21,14],[20,13],[19,11],[17,6],[15,3],[13,1],[11,0],[7,0],[5,1],[4,2],[3,4],[3,6],[4,8],[5,9],[12,13],[13,14],[14,16],[14,18],[13,20],[11,21],[9,20],[8,18],[8,16],[9,13],[11,10],[16,3],[18,1],[20,0],[22,0],[23,1],[23,2]]},"'":{width:10,points:[[5,19],[4,20],[5,21],[6,20],[6,18],[5,16],[4,15]]},"(":{width:14,points:[[11,25],[9,23],[7,20],[5,16],[4,11],[4,7],[5,2],[7,-2],[9,-5],[11,-7]]},")":{width:14,points:[[3,25],[5,23],[7,20],[9,16],[10,11],[10,7],[9,2],[7,-2],[5,-5],[3,-7]]},"*":{width:16,points:[[8,21],[8,9],null,[3,18],[13,12],null,[13,18],[3,12]]},"+":{width:26,points:[[13,18],[13,0],null,[4,9],[22,9]]},",":{width:10,points:[[6,1],[5,0],[4,1],[5,2],[6,1],[6,-1],[5,-3],[4,-4]]},"-":{width:26,points:[[4,9],[22,9]]},".":{width:10,points:[[5,2],[4,1],[5,0],[6,1],[5,2]]},"/":{width:22,points:[[20,25],[2,-7]]},"0":{width:20,points:[[9,21],[6,20],[4,17],[3,12],[3,9],[4,4],[6,1],[9,0],[11,0],[14,1],[16,4],[17,9],[17,12],[16,17],[14,20],[11,21],[9,21]]},"1":{width:20,points:[[6,17],[8,18],[11,21],[11,0]]},"2":{width:20,points:[[4,16],[4,17],[5,19],[6,20],[8,21],[12,21],[14,20],[15,19],[16,17],[16,15],[15,13],[13,10],[3,0],[17,0]]},"3":{width:20,points:[[5,21],[16,21],[10,13],[13,13],[15,12],[16,11],[17,8],[17,6],[16,3],[14,1],[11,0],[8,0],[5,1],[4,2],[3,4]]},"4":{width:20,points:[[13,21],[3,7],[18,7],null,[13,21],[13,0]]},"5":{width:20,points:[[15,21],[5,21],[4,12],[5,13],[8,14],[11,14],[14,13],[16,11],[17,8],[17,6],[16,3],[14,1],[11,0],[8,0],[5,1],[4,2],[3,4]]},"6":{width:20,points:[[16,18],[15,20],[12,21],[10,21],[7,20],[5,17],[4,12],[4,7],[5,3],[7,1],[10,0],[11,0],[14,1],[16,3],[17,6],[17,7],[16,10],[14,12],[11,13],[10,13],[7,12],[5,10],[4,7]]},"7":{width:20,points:[[17,21],[7,0],null,[3,21],[17,21]]},"8":{width:20,points:[[8,21],[5,20],[4,18],[4,16],[5,14],[7,13],[11,12],[14,11],[16,9],[17,7],[17,4],[16,2],[15,1],[12,0],[8,0],[5,1],[4,2],[3,4],[3,7],[4,9],[6,11],[9,12],[13,13],[15,14],[16,16],[16,18],[15,20],[12,21],[8,21]]},"9":{width:20,points:[[16,14],[15,11],[13,9],[10,8],[9,8],[6,9],[4,11],[3,14],[3,15],[4,18],[6,20],[9,21],[10,21],[13,20],[15,18],[16,14],[16,9],[15,4],[13,1],[10,0],[8,0],[5,1],[4,3]]},":":{width:10,points:[[5,14],[4,13],[5,12],[6,13],[5,14],null,[5,2],[4,1],[5,0],[6,1],[5,2]]},";":{width:10,points:[[5,14],[4,13],[5,12],[6,13],[5,14],null,[6,1],[5,0],[4,1],[5,2],[6,1],[6,-1],[5,-3],[4,-4]]},"<":{width:24,points:[[20,18],[4,9],[20,0]]},"=":{width:26,points:[[4,12],[22,12],null,[4,6],[22,6]]},">":{width:24,points:[[4,18],[20,9],[4,0]]},"?":{width:18,points:[[3,16],[3,17],[4,19],[5,20],[7,21],[11,21],[13,20],[14,19],[15,17],[15,15],[14,13],[13,12],[9,10],[9,7],null,[9,2],[8,1],[9,0],[10,1],[9,2]]},"@":{width:27,points:[[18,13],[17,15],[15,16],[12,16],[10,15],[9,14],[8,11],[8,8],[9,6],[11,5],[14,5],[16,6],[17,8],null,[12,16],[10,14],[9,11],[9,8],[10,6],[11,5],null,[18,16],[17,8],[17,6],[19,5],[21,5],[23,7],[24,10],[24,12],[23,15],[22,17],[20,19],[18,20],[15,21],[12,21],[9,20],[7,19],[5,17],[4,15],[3,12],[3,9],[4,6],[5,4],[7,2],[9,1],[12,0],[15,0],[18,1],[20,2],[21,3],null,[19,16],[18,8],[18,6],[19,5]]},A:{width:18,points:[[9,21],[1,0],null,[9,21],[17,0],null,[4,7],[14,7]]},B:{width:21,points:[[4,21],[4,0],null,[4,21],[13,21],[16,20],[17,19],[18,17],[18,15],[17,13],[16,12],[13,11],null,[4,11],[13,11],[16,10],[17,9],[18,7],[18,4],[17,2],[16,1],[13,0],[4,0]]},C:{width:21,points:[[18,16],[17,18],[15,20],[13,21],[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5]]},D:{width:21,points:[[4,21],[4,0],null,[4,21],[11,21],[14,20],[16,18],[17,16],[18,13],[18,8],[17,5],[16,3],[14,1],[11,0],[4,0]]},E:{width:19,points:[[4,21],[4,0],null,[4,21],[17,21],null,[4,11],[12,11],null,[4,0],[17,0]]},F:{width:18,points:[[4,21],[4,0],null,[4,21],[17,21],null,[4,11],[12,11]]},G:{width:21,points:[[18,16],[17,18],[15,20],[13,21],[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[18,8],null,[13,8],[18,8]]},H:{width:22,points:[[4,21],[4,0],null,[18,21],[18,0],null,[4,11],[18,11]]},I:{width:8,points:[[4,21],[4,0]]},J:{width:16,points:[[12,21],[12,5],[11,2],[10,1],[8,0],[6,0],[4,1],[3,2],[2,5],[2,7]]},K:{width:21,points:[[4,21],[4,0],null,[18,21],[4,7],null,[9,12],[18,0]]},L:{width:17,points:[[4,21],[4,0],null,[4,0],[16,0]]},M:{width:24,points:[[4,21],[4,0],null,[4,21],[12,0],null,[20,21],[12,0],null,[20,21],[20,0]]},N:{width:22,points:[[4,21],[4,0],null,[4,21],[18,0],null,[18,21],[18,0]]},O:{width:22,points:[[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[19,8],[19,13],[18,16],[17,18],[15,20],[13,21],[9,21]]},P:{width:21,points:[[4,21],[4,0],null,[4,21],[13,21],[16,20],[17,19],[18,17],[18,14],[17,12],[16,11],[13,10],[4,10]]},Q:{width:22,points:[[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[19,8],[19,13],[18,16],[17,18],[15,20],[13,21],[9,21],null,[12,4],[18,-2]]},R:{width:21,points:[[4,21],[4,0],null,[4,21],[13,21],[16,20],[17,19],[18,17],[18,15],[17,13],[16,12],[13,11],[4,11],null,[11,11],[18,0]]},S:{width:20,points:[[17,18],[15,20],[12,21],[8,21],[5,20],[3,18],[3,16],[4,14],[5,13],[7,12],[13,10],[15,9],[16,8],[17,6],[17,3],[15,1],[12,0],[8,0],[5,1],[3,3]]},T:{width:16,points:[[8,21],[8,0],null,[1,21],[15,21]]},U:{width:22,points:[[4,21],[4,6],[5,3],[7,1],[10,0],[12,0],[15,1],[17,3],[18,6],[18,21]]},V:{width:18,points:[[1,21],[9,0],null,[17,21],[9,0]]},W:{width:24,points:[[2,21],[7,0],null,[12,21],[7,0],null,[12,21],[17,0],null,[22,21],[17,0]]},X:{width:20,points:[[3,21],[17,0],null,[17,21],[3,0]]},Y:{width:18,points:[[1,21],[9,11],[9,0],null,[17,21],[9,11]]},Z:{width:20,points:[[17,21],[3,0],null,[3,21],[17,21],null,[3,0],[17,0]]},"[":{width:14,points:[[4,25],[4,-7],null,[5,25],[5,-7],null,[4,25],[11,25],null,[4,-7],[11,-7]]},"\\":{width:14,points:[[0,21],[14,-3]]},"]":{width:14,points:[[9,25],[9,-7],null,[10,25],[10,-7],null,[3,25],[10,25],null,[3,-7],[10,-7]]},"^":{width:14,points:[[3,10],[8,18],[13,10]]},_:{width:16,points:[[0,-2],[16,-2]]},"`":{width:10,points:[[6,21],[5,20],[4,18],[4,16],[5,15],[6,16],[5,17]]},a:{width:19,points:[[15,14],[15,0],null,[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},b:{width:19,points:[[4,21],[4,0],null,[4,11],[6,13],[8,14],[11,14],[13,13],[15,11],[16,8],[16,6],[15,3],[13,1],[11,0],[8,0],[6,1],[4,3]]},c:{width:18,points:[[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},d:{width:19,points:[[15,21],[15,0],null,[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},e:{width:18,points:[[3,8],[15,8],[15,10],[14,12],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},f:{width:12,points:[[10,21],[8,21],[6,20],[5,17],[5,0],null,[2,14],[9,14]]},g:{width:19,points:[[15,14],[15,-2],[14,-5],[13,-6],[11,-7],[8,-7],[6,-6],null,[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},h:{width:19,points:[[4,21],[4,0],null,[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0]]},i:{width:8,points:[[3,21],[4,20],[5,21],[4,22],[3,21],null,[4,14],[4,0]]},j:{width:10,points:[[5,21],[6,20],[7,21],[6,22],[5,21],null,[6,14],[6,-3],[5,-6],[3,-7],[1,-7]]},k:{width:17,points:[[4,21],[4,0],null,[14,14],[4,4],null,[8,8],[15,0]]},l:{width:8,points:[[4,21],[4,0]]},m:{width:30,points:[[4,14],[4,0],null,[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0],null,[15,10],[18,13],[20,14],[23,14],[25,13],[26,10],[26,0]]},n:{width:19,points:[[4,14],[4,0],null,[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0]]},o:{width:19,points:[[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3],[16,6],[16,8],[15,11],[13,13],[11,14],[8,14]]},p:{width:19,points:[[4,14],[4,-7],null,[4,11],[6,13],[8,14],[11,14],[13,13],[15,11],[16,8],[16,6],[15,3],[13,1],[11,0],[8,0],[6,1],[4,3]]},q:{width:19,points:[[15,14],[15,-7],null,[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},r:{width:13,points:[[4,14],[4,0],null,[4,8],[5,11],[7,13],[9,14],[12,14]]},s:{width:17,points:[[14,11],[13,13],[10,14],[7,14],[4,13],[3,11],[4,9],[6,8],[11,7],[13,6],[14,4],[14,3],[13,1],[10,0],[7,0],[4,1],[3,3]]},t:{width:12,points:[[5,21],[5,4],[6,1],[8,0],[10,0],null,[2,14],[9,14]]},u:{width:19,points:[[4,14],[4,4],[5,1],[7,0],[10,0],[12,1],[15,4],null,[15,14],[15,0]]},v:{width:16,points:[[2,14],[8,0],null,[14,14],[8,0]]},w:{width:22,points:[[3,14],[7,0],null,[11,14],[7,0],null,[11,14],[15,0],null,[19,14],[15,0]]},x:{width:17,points:[[3,14],[14,0],null,[14,14],[3,0]]},y:{width:16,points:[[2,14],[8,0],null,[14,14],[8,0],[6,-4],[4,-6],[2,-7],[1,-7]]},z:{width:17,points:[[14,14],[3,0],null,[3,14],[14,14],null,[3,0],[14,0]]},"{":{width:14,points:[[9,25],[7,24],[6,23],[5,21],[5,19],[6,17],[7,16],[8,14],[8,12],[6,10],null,[7,24],[6,22],[6,20],[7,18],[8,17],[9,15],[9,13],[8,11],[4,9],[8,7],[9,5],[9,3],[8,1],[7,0],[6,-2],[6,-4],[7,-6],null,[6,8],[8,6],[8,4],[7,2],[6,1],[5,-1],[5,-3],[6,-5],[7,-6],[9,-7]]},"|":{width:8,points:[[4,25],[4,-7]]},"}":{width:14,points:[[5,25],[7,24],[8,23],[9,21],[9,19],[8,17],[7,16],[6,14],[6,12],[8,10],null,[7,24],[8,22],[8,20],[7,18],[6,17],[5,15],[5,13],[6,11],[10,9],[6,7],[5,5],[5,3],[6,1],[7,0],[8,-2],[8,-4],[7,-6],null,[8,8],[6,6],[6,4],[7,2],[8,1],[9,-1],[9,-3],[8,-5],[7,-6],[5,-7]]},"~":{width:24,points:[[3,6],[3,8],[4,11],[6,12],[8,12],[10,11],[14,8],[16,7],[18,7],[20,8],[21,10],null,[3,8],[4,10],[6,11],[8,11],[10,10],[14,7],[16,6],[18,6],[20,7],[21,10],[21,12]]},"??":{diacritic:"`",letter:"a"},"??":{diacritic:"??",letter:"a"},"??":{diacritic:"^",letter:"a"},"??":{diacritic:"??",letter:"a"},"??":{diacritic:"~",letter:"a"},"??":{diacritic:"`",letter:"e"},"??":{diacritic:"??",letter:"e"},"??":{diacritic:"^",letter:"e"},"??":{diacritic:"??",letter:"e"},"??":{diacritic:"`",letter:"i"},"??":{diacritic:"??",letter:"i"},"??":{diacritic:"^",letter:"i"},"??":{diacritic:"??",letter:"i"},"??":{diacritic:"`",letter:"o"},"??":{diacritic:"??",letter:"o"},"??":{diacritic:"^",letter:"o"},"??":{diacritic:"??",letter:"o"},"??":{diacritic:"~",letter:"o"},"??":{diacritic:"`",letter:"u"},"??":{diacritic:"??",letter:"u"},"??":{diacritic:"^",letter:"u"},"??":{diacritic:"??",letter:"u"},"??":{diacritic:"??",letter:"y"},"??":{diacritic:"??",letter:"y"},"??":{diacritic:"??",letter:"c"},"??":{diacritic:"~",letter:"n"},"??":{diacritic:"`",letter:"A"},"??":{diacritic:"??",letter:"A"},"??":{diacritic:"^",letter:"A"},"??":{diacritic:"??",letter:"A"},"??":{diacritic:"~",letter:"A"},"??":{diacritic:"`",letter:"E"},"??":{diacritic:"??",letter:"E"},"??":{diacritic:"^",letter:"E"},"??":{diacritic:"??",letter:"E"},"??":{diacritic:"`",letter:"I"},"??":{diacritic:"??",letter:"I"},"??":{diacritic:"^",letter:"I"},"??":{diacritic:"??",letter:"I"},"??":{diacritic:"`",letter:"O"},"??":{diacritic:"??",letter:"O"},"??":{diacritic:"^",letter:"O"},"??":{diacritic:"??",letter:"O"},"??":{diacritic:"~",letter:"O"},"??":{diacritic:"`",letter:"U"},"??":{diacritic:"??",letter:"U"},"??":{diacritic:"^",letter:"U"},"??":{diacritic:"??",letter:"U"},"??":{diacritic:"??",letter:"Y"},"??":{diacritic:"??",letter:"C"},"??":{diacritic:"~",letter:"N"}},specialchars:{pi:{width:19,points:[[6,14],[6,0],null,[14,14],[14,0],null,[2,13],[6,16],[13,13],[17,16]]}},diacritics:{"??":{entity:"cedil",points:[[6,-4],[4,-6],[2,-7],[1,-7]]},"??":{entity:"acute",points:[[8,19],[13,22]]},"`":{entity:"grave",points:[[7,22],[12,19]]},"^":{entity:"circ",points:[[5.5,19],[9.5,23],[12.5,19]]},"??":{entity:"trema",points:[[5,21],[6,20],[7,21],[6,22],[5,21],null,[12,21],[13,20],[14,21],[13,22],[12,21]]},"~":{entity:"tilde",points:[[4,18],[7,22],[10,18],[13,22]]}},style:{size:8,font:null,color:"#000000",weight:1,textAlign:"left",textBaseline:"bottom",adjustAlign:false,angle:0,tracking:1,boundingBoxColor:"#ff0000",originPointColor:"#000000"},debug:false,_bufferLexemes:{},extend:function(a,d){for(var b in d){if(b in a){continue}a[b]=d[b]}return a},letter:function(a){return CanvasText.letters[a]},parseLexemes:function(g){if(CanvasText._bufferLexemes[g]){return CanvasText._bufferLexemes[g]}var d,h,f=g.match(/&[A-Za-z]{2,5};|\s|./g),a=[],e=[];for(d=0;d<f.length;d++){h=f[d];if(h.length==1){e.push(h)}else{var b=h.substring(1,h.length-1);if(CanvasText.specialchars[b]){e.push(b)}else{e=e.concat(h.toArray())}}}for(d=0;d<e.length;d++){h=e[d];if(h=CanvasText.letters[h]||CanvasText.specialchars[h]){a.push(h)}}for(d=0;d<a.length;d++){if(a===null||typeof a==="undefined"){delete a[d]}}return CanvasText._bufferLexemes[g]=a},ascent:function(a){a=a||CanvasText.style;return(a.size||CanvasText.style.size)},descent:function(a){a=a||CanvasText.style;return 7*(a.size||CanvasText.style.size)/25},measure:function(f,d){if(!f){return}d=d||CanvasText.style;var a,b,g=CanvasText.parseLexemes(f),e=0;for(a=g.length-1;a>-1;--a){c=g[a];b=(c.diacritic)?CanvasText.letter(c.letter).width:c.width;e+=b*(d.tracking||CanvasText.style.tracking)*(d.size||CanvasText.style.size)/25}return e},getDimensions:function(f,d){d=d||CanvasText.style;var b=CanvasText.measure(f,d),a=d.size||CanvasText.style.size,e=d.angle||CanvasText.style.angle;if(d.angle==0){return{width:b,height:a}}return{width:Math.abs(Math.cos(e)*b)+Math.abs(Math.sin(e)*a),height:Math.abs(Math.sin(e)*b)+Math.abs(Math.cos(e)*a)}},drawPoints:function(m,l,k,h,g,e){var f,j,d=true,b=0;e=e||{x:0,y:0};m.beginPath();for(f=0;f<l.length;f++){j=l[f];if(!j){d=true;continue}if(d){m.moveTo(k+j[0]*g+e.x,h-j[1]*g+e.y);d=false}else{m.lineTo(k+j[0]*g+e.x,h-j[1]*g+e.y)}}m.stroke();m.closePath()},draw:function(m,h,b,r){if(!m){return}CanvasText.extend(r,CanvasText.style);var q,t,v=0,d=r.size/25,k=0,j=0,e=CanvasText.parseLexemes(m),g={x:0,y:0},f=CanvasText.measure(m,r),n;if(r.adjustAlign){n=CanvasText.getBestAlign(r.angle,r);CanvasText.extend(r,n)}switch(r.textAlign){case"left":break;case"center":g.x=-f/2;break;case"right":g.x=-f;break}switch(r.textBaseline){case"bottom":break;case"middle":g.y=r.size/2;break;case"top":g.y=r.size;break}this.save();this.translate(h,b);this.rotate(r.angle);this.lineCap="round";this.lineWidth=2*d*(r.weight||CanvasText.style.weight);this.strokeStyle=r.color||CanvasText.style.color;for(q=0;q<e.length;q++){t=e[q];if(t.width==-1){k=0;j=r.size*1.4;continue}var o=t.points,l=t.width;if(t.diacritic){var u=CanvasText.diacritics[t.diacritic],a=CanvasText.letter(t.letter);CanvasText.drawPoints(this,u.points,k,j-(t.letter.toUpperCase()==t.letter?3:0),d,g);o=a.points;l=a.width}CanvasText.drawPoints(this,o,k,j,d,g);if(CanvasText.debug){this.save();this.lineJoin="miter";this.lineWidth=0.5;this.strokeStyle=(r.boundingBoxColor||CanvasText.style.boundingBoxColor);this.strokeRect(k+g.x,j+g.y,l*d,-r.size);this.fillStyle=(r.originPointColor||CanvasText.style.originPointColor);this.beginPath();this.arc(0,0,1.5,0,Math.PI*2,true);this.fill();this.closePath();this.restore()}k+=l*d*(r.tracking||CanvasText.style.tracking)}this.restore();return v}};CanvasText.proto=window.CanvasRenderingContext2D?window.CanvasRenderingContext2D.prototype:document.createElement("canvas").getContext("2d").__proto__;if(CanvasText.proto){CanvasText.proto.drawText=CanvasText.draw;CanvasText.proto.measure=CanvasText.measure;CanvasText.proto.getTextBounds=CanvasText.getDimensions;CanvasText.proto.fontAscent=CanvasText.ascent;CanvasText.proto.fontDescent=CanvasText.descent}var Flotr={version:"%version%",author:"Bas Wenneker",website:"http://www.solutoire.com",isIphone:/iphone/i.test(navigator.userAgent),graphTypes:{},plugins:{},addType:function(a,b){Flotr.graphTypes[a]=b;Flotr.defaultOptions[a]=b.options||{};Flotr.defaultOptions.defaultType=Flotr.defaultOptions.defaultType||a},addPlugin:function(a,b){Flotr.plugins[a]=b;Flotr.defaultOptions[a]=b.options||{}},draw:function(b,d,a,e){e=e||Flotr.Graph;return new e(b,d,a)},getSeries:function(a){return a.collect(function(d){d=(d.data)?Object.clone(d):{data:d};for(var b=d.data.length-1;b>-1;--b){d.data[b][1]=(d.data[b][1]===null?null:parseFloat(d.data[b][1]))}return d})},merge:function(f,d){var e,b,a=d||{};for(e in f){b=f[e];a[e]=(b&&typeof(b)==="object"&&!(b.constructor===Array||b.constructor===RegExp)&&!Object.isElement(b))?Flotr.merge(b,d[e]):a[e]=b}return a},clone:function(b){var d,a,e={};for(d in b){a=b[d];e[d]=(a&&typeof(a)==="object"&&!(a.constructor===Array||a.constructor===RegExp)&&!Object.isElement(a))?Flotr.clone(a):a}return e},getTickSize:function(f,e,a,b){var j=(a-e)/f,h=Flotr.getMagnitude(j),g=10,d=j/h;if(d<1.5){g=1}else{if(d<2.25){g=2}else{if(d<3){g=((b==0)?2:2.5)}else{if(d<7.5){g=5}}}}return g*h},defaultTickFormatter:function(a){return a+""},defaultTrackFormatter:function(a){return"("+a.x+", "+a.y+")"},engineeringNotation:function(f,a,e){var d=["Y","Z","E","P","T","G","M","k",""],g=["y","z","a","f","p","n","?","m",""],b=d.length;e=e||1000;a=Math.pow(10,a||2);if(f==0){return 0}if(f>1){while(b--&&(f>=e)){f/=e}}else{d=g;b=d.length;while(b--&&(f<1)){f*=e}}return(Math.round(f*a)/a)+d[b]},getMagnitude:function(a){return Math.pow(10,Math.floor(Math.log(a)/Math.LN10))},toPixel:function(a){return Math.floor(a)+0.5},toRad:function(a){return -a*(Math.PI/180)},floorInBase:function(b,a){return a*Math.floor(b/a)},drawText:function(b,e,a,f,d){if(!b.fillText||Flotr.isIphone){b.drawText(e,a,f,d);return}d=Object.extend({size:"10px",color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},d);b.save();b.translate(a,f);b.rotate(d.angle);b.fillStyle=d.color;b.font=(d.weight>1?"bold ":"")+(d.size*1.3)+"px sans-serif";b.textAlign=d.textAlign;b.textBaseline=d.textBaseline;b.fillText(e,0,0);b.restore()},measureText:function(a,e,d){if(!a.fillText||Flotr.isIphone){return{width:a.measure(e,d)}}d=Object.extend({size:"10px",weight:1,angle:0},d);a.save();a.rotate(d.angle);a.font=(d.weight>1?"bold ":"")+(d.size*1.3)+"px sans-serif";var b=a.measureText(e);a.restore();return b},getBestTextAlign:function(b,a){a=a||{textAlign:"center",textBaseline:"middle"};b+=Flotr.getTextAngleFromAlign(a);if(Math.abs(Math.cos(b))>0.01){a.textAlign=(Math.cos(b)>0?"right":"left")}if(Math.abs(Math.sin(b))>0.01){a.textBaseline=(Math.sin(b)>0?"top":"bottom")}return a},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":3*(Math.PI/4),"left middle":Math.PI,"left bottom":-3*(Math.PI/4),"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(a){return Flotr.alignTable[a.textAlign+" "+a.textBaseline]||0}};Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:true,fontSize:7.5,resolution:1,legend:{show:true,noColumns:1,labelFormatter:function(a){return a},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:"nw",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{ticks:null,showLabels:true,labelsAngle:0,title:null,titleAngle:0,noTicks:5,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscaleMargin:0,color:null,mode:"normal",timeFormat:null,scaling:"linear",base:Math.E,minLabelWidth:null,minLabelHeight:null,height:null},x2axis:{},yaxis:{ticks:null,showLabels:true,labelsAngle:0,title:null,titleAngle:90,noTicks:5,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,minLabelWidth:null,minLabelHeight:null,fontSize:null},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,tickColor:"#DDDDDD",labelMargin:3,verticalLines:true,horizontalLines:true,outlineWidth:2,circular:false},selection:{mode:null,color:"#B6D9FF",fps:20},crosshair:{mode:null,color:"#FF0000",hideCursor:true,lineWidth:1},mouse:{track:false,trackAll:false,position:"se",relative:false,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,radius:3,fillColor:null,fillOpacity:0.4,trackStyle:null},guides:[{mode:null,color:"#FA4444",lineWidth:2,sensibility:2,value:0,trackFormatter:Flotr.defaultTrackFormatter}]};Flotr.Graph=Class.create({initialize:function(d,f,a){try{this.el=$(d);if(!this.el){throw"The target container doesn't exist"}if(!this.el.clientWidth){throw"The target container must be visible"}this.registerPlugins();this.el.fire("flotr:beforeinit",[this]);this.el.graph=this;this.data=f;this.lastMousePos={pageX:null,pageY:null};this.selection={first:{x:-1,y:-1},second:{x:-1,y:-1}};this.plotOffset={left:0,right:0,top:0,bottom:0};this.prevSelection=null;this.selectionInterval=null;this.ignoreClick=false;this.prevHit=null;this.series=Flotr.getSeries(f);this.setOptions(a);var b,h;for(b in Flotr.graphTypes){this[b]=Object.clone(Flotr.graphTypes[b]);for(h in this[b]){if(Object.isFunction(this[b][h])){this[b][h]=this[b][h].bind(this)}}}this.constructCanvas();this.el.fire("flotr:afterconstruct",[this]);this.initEvents();this.findDataRanges();this.calculateTicks(this.axes.x);this.calculateTicks(this.axes.x2);this.calculateTicks(this.axes.y);this.calculateTicks(this.axes.y2);this.calculateSpacing();this.setupAxes();this.draw();this.insertLegend();this.el.fire("flotr:afterinit",[this])}catch(g){try{console.error(g)}catch(g){}}},setOptions:function(b){var v=Flotr.clone(Flotr.defaultOptions);v.x2axis=Object.extend(Object.clone(v.xaxis),v.x2axis);v.y2axis=Object.extend(Object.clone(v.yaxis),v.y2axis);this.options=Flotr.merge(b||{},v);this.axes={x:{options:this.options.xaxis,n:1},x2:{options:this.options.x2axis,n:2},y:{options:this.options.yaxis,n:1},y2:{options:this.options.y2axis,n:2}};var h=[],d=[],m=this.series.length,q=this.series.length,e=this.options.colors,a=[],g=0,o,l,k,u;for(l=q-1;l>-1;--l){o=this.series[l].color;if(o){--q;if(Object.isNumber(o)){h.push(o)}else{a.push(Flotr.Color.parse(o))}}}for(l=h.length-1;l>-1;--l){q=Math.max(q,h[l]+1)}for(l=0;d.length<q;){o=(e.length==l)?new Flotr.Color(100,100,100):Flotr.Color.parse(e[l]);var f=g%2==1?-1:1,n=1+f*Math.ceil(g/2)*0.2;o.scale(n,n,n);d.push(o);if(++l>=e.length){l=0;++g}}for(l=0,k=0;l<m;++l){u=this.series[l];if(u.color==null){u.color=d[k++].toString()}else{if(Object.isNumber(u.color)){u.color=d[u.color].toString()}}if(!u.xaxis){u.xaxis=this.axes.x}if(u.xaxis==1){u.xaxis=this.axes.x}else{if(u.xaxis==2){u.xaxis=this.axes.x2}}if(!u.yaxis){u.yaxis=this.axes.y}if(u.yaxis==1){u.yaxis=this.axes.y}else{if(u.yaxis==2){u.yaxis=this.axes.y2}}for(var r in Flotr.graphTypes){u[r]=Object.extend(Object.clone(this.options[r]),u[r])}u.mouse=Object.extend(Object.clone(this.options.mouse),u.mouse);if(u.shadowSize==null){u.shadowSize=this.options.shadowSize}}},setupAxes:function(){function b(e,f){if(f.scaling==="logarithmic"){e=Math.log(Math.max(e,Number.MIN_VALUE));if(f.base!==Math.E){e/=Math.log(f.base)}}return e}function a(e,f){if(f.scaling==="logarithmic"){e=(f.base===Math.E)?Math.exp(e):Math.pow(f.base,e)}return e}this.axes.x.d2p=this.axes.x2.d2p=function(e){return(b(e,this.options)-this.min)*this.scale};this.axes.x.p2d=this.axes.x2.p2d=function(e){return(a(e,this.options)/this.scale+this.min)};var d=this.plotHeight;this.axes.y.d2p=this.axes.y2.d2p=function(e){return d-(b(e,this.options)-this.min)*this.scale};this.axes.y.p2d=this.axes.y2.p2d=function(e){return a(this.max-e/this.scale,this.options)}},constructCanvas:function(){var e=this.el,b,h,a,f;this.canvas=e.select(".flotr-canvas")[0];this.overlay=e.select(".flotr-overlay")[0];this.mouseoverlay=e.select(".flotr-mouseoverlay")[0];e.descendants().invoke("remove");e.style.position="relative";e.style.cursor=e.style.cursor||"default";b=e.getDimensions();this.canvasWidth=b.width;this.canvasHeight=b.height;var d={width:b.width+"px",height:b.height+"px"};var g=this.options;b.width*=g.resolution;b.height*=g.resolution;if(this.canvasWidth<=0||this.canvasHeight<=0){throw"Invalid dimensions for plot, width = "+this.canvasWidth+", height = "+this.canvasHeight}if(!this.mouseoverlay){f=this.mouseoverlay=$(document.createElement("div"));f.className="flotr-mouseoverlay";f.style.cssText="position:absolute;left:0px;top:0px;"}f=this.mouseoverlay.writeAttribute(b).show().setStyle(d);e.insert(f);if(!this.canvas){h=this.canvas=$(document.createElement("canvas"));h.className="flotr-canvas";h.style.cssText="position:absolute;left:0px;top:0px;"}h=this.canvas.writeAttribute(b).show().setStyle(d);h.context_=null;f.insert(h);if(!this.overlay){a=this.overlay=$(document.createElement("canvas"));a.className="flotr-overlay";a.style.cssText="position:absolute;left:0px;top:0px;"}a=this.overlay.writeAttribute(b).show().setStyle(d);a.context_=null;f.insert(a);if(Prototype.Browser.IE&&window.G_vmlCanvasManager){window.G_vmlCanvasManager.initElement(h);window.G_vmlCanvasManager.initElement(a)}this.ctx=h.getContext("2d");this.octx=a.getContext("2d");if(!Prototype.Browser.IE){this.ctx.scale(g.resolution,g.resolution);this.octx.scale(g.resolution,g.resolution)}this.textEnabled=!!this.ctx.drawText},processColor:function(a,b){if(!a){return"rgba(0, 0, 0, 0)"}b=Object.extend({x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx},b);if(a instanceof Flotr.Color){return a.adjust(null,null,null,b.opacity).toString()}if(Object.isString(a)){return Flotr.Color.parse(a).scale(null,null,null,b.opacity).toString()}var h=a.colors?a:{colors:a};if(!b.ctx){if(!Object.isArray(h.colors)){return"rgba(0, 0, 0, 0)"}return Flotr.Color.parse(Object.isArray(h.colors[0])?h.colors[0][1]:h.colors[0]).scale(null,null,null,b.opacity).toString()}h=Object.extend({start:"top",end:"bottom"},h);if(/top/i.test(h.start)){b.x1=0}if(/left/i.test(h.start)){b.y1=0}if(/bottom/i.test(h.end)){b.x2=0}if(/right/i.test(h.end)){b.y2=0}var e,g,d,f=b.ctx.createLinearGradient(b.x1,b.y1,b.x2,b.y2);for(e=0;e<h.colors.length;e++){g=h.colors[e];if(Object.isArray(g)){d=g[0];g=g[1]}else{d=e/(h.colors.length-1)}f.addColorStop(d,Flotr.Color.parse(g).scale(null,null,null,b.opacity))}return f},registerPlugins:function(){var a,b,d;for(a in Flotr.plugins){b=Flotr.plugins[a];for(d in b.callbacks){this.el.stopObserving(d).observe(d,b.callbacks[d].bindAsEventListener(this))}this[a]=Object.clone(b);for(p in this[a]){if(Object.isFunction(this[a][p])){this[a][p]=this[a][p].bind(this)}}}},getTextDimensions:function(h,d,b,e){if(!h){return{width:0,height:0}}if(!this.options.HtmlText&&this.textEnabled){var f=this.ctx.getTextBounds(h,d);return{width:f.width+2,height:f.height+6}}else{var a=this.el.insert('<div style="position:absolute;top:-10000px;'+b+'" class="'+e+' flotr-dummy-div">'+h+"</div>").select(".flotr-dummy-div")[0],g=a.getDimensions();a.remove();return g}},loadDataGrid:function(){if(this.seriesData){return this.seriesData}var a=this.series,b=[];for(i=0;i<a.length;++i){a[i].data.each(function(e){var d=e[0],h=e[1],g=b.find(function(j){return j[0]==d});if(g){g[i+1]=h}else{var f=[];f[0]=d;f[i+1]=h;b.push(f)}})}return this.seriesData=b.sortBy(function(d){return d[0]})},initEvents:function(){this.mouseoverlay.stopObserving().observe("mousedown",this.mouseDownHandler.bindAsEventListener(this)).observe("mousemove",this.mouseMoveHandler.bindAsEventListener(this)).observe("mouseout",this.mouseOutHandler.bindAsEventListener(this)).observe("click",this.clickHandler.bindAsEventListener(this))},findDataRanges:function(){var o=this.series,l=this.axes;l.x.datamin=l.x2.datamin=l.y.datamin=l.y2.datamin=Number.MAX_VALUE;l.x.datamax=l.x2.datamax=l.y.datamax=l.y2.datamax=-Number.MAX_VALUE;if(o.length>0){var e,b,f,m,k,d,n,g;for(e=0;e<o.length;++e){d=o[e].data,n=o[e].xaxis,g=o[e].yaxis;if(d.length>0&&!o[e].hide){if(!n.used){n.datamin=n.datamax=d[0][0]}if(!g.used){g.datamin=g.datamax=d[0][1]}n.used=true;g.used=true;for(f=d.length-1;f>-1;--f){m=d[f][0];if(m<n.datamin){n.datamin=m}else{if(m>n.datamax){n.datamax=m}}for(b=1;b<d[f].length;b++){k=d[f][b];if(k<g.datamin){g.datamin=k}else{if(k>g.datamax){g.datamax=k}}}}}}}this.findXAxesValues();this.calculateRange(l.x,"x");if(l.x2.used){this.calculateRange(l.x2,"x")}this.calculateRange(l.y,"y");if(l.y2.used){this.calculateRange(l.y2,"y")}},extendRange:function(d,b){var e=(b==="y")?"extendYRange":"extendXRange";for(var a in Flotr.graphTypes){if(this[a][e]){this[a][e](d)}}},calculateRange:function(f,e){var h=f.options,d=h.min!=null?h.min:f.datamin,a=h.max!=null?h.max:f.datamax,g=h.autoscaleMargin;if(a-d==0){var b=(a==0)?1:0.01;d-=b;a+=b}f.tickSize=Flotr.getTickSize(h.noTicks,d,a,h.tickDecimals);if(h.min==null&&g!=0){d-=f.tickSize*g;if(d<0&&f.datamin>=0){d=0}d=f.tickSize*Math.floor(d/f.tickSize)}if(h.max==null&&g!=0){a+=f.tickSize*g;if(a>0&&f.datamax<=0&&f.datamax!=f.datamin){a=0}a=f.tickSize*Math.ceil(a/f.tickSize)}if(d==a){a=d+1}f.min=d;f.max=a;this.extendRange(f,e)},findXAxesValues:function(){var b,a,d;for(b=this.series.length-1;b>-1;--b){d=this.series[b];d.xaxis.values=d.xaxis.values||{};for(a=d.data.length-1;a>-1;--a){d.xaxis.values[d.data[a][0]+""]={}}}},calculateTicks:function(b){var n=b.options,q,j;b.ticks=[];if(n.ticks){var x=n.ticks,k,h;if(Object.isFunction(x)){x=x({min:b.min,max:b.max})}for(q=0;q<x.length;++q){k=x[q];if(typeof(k)=="object"){j=k[0];h=(k.length>1)?k[1]:n.tickFormatter(j)}else{j=k;h=n.tickFormatter(j)}b.ticks[q]={v:j,label:h}}}else{if(n.mode=="time"){var z=Flotr.Date.timeUnits,g=Flotr.Date.spec,w=(b.max-b.min)/b.options.noTicks,m,l;for(q=0;q<g.length-1;++q){var u=g[q][0]*z[g[q][1]];if(w<=(u+g[q+1][0]*z[g[q+1][1]])/2){break}}m=g[q][0];l=g[q][1];if(l=="year"){m=Flotr.getTickSize(b.options.noTicks*z.year,b.min,b.max,0)}b.tickSize=m;b.tickUnit=l;b.ticks=Flotr.Date.generator(b)}else{if(n.mode=="bytes"||n.mode=="byte"){var e=0,A,f=1024,a="KB",h;if(b.max>=10*1024*1024){f=1024*1024;a="MB"}else{if(b.max<100*1024){b.max=100*1024}}if(b.min<0){b.min=0}b.tickSize=Flotr.getTickSize(n.noTicks,b.min/f,b.max/f,n.tickDecimals);b.tickSize=b.tickSize*f;e=b.tickSize*Math.ceil(b.min/b.tickSize);for(q=0;e+q*b.tickSize<=b.max;++q){j=(e+q*b.tickSize);h=(j/f).toFixed();j=h*f;b.ticks.push({v:j,label:n.tickFormatter(h)})}if(this.options.title){if(n.mode=="byte"){this.options.title+=" ("+a+")"}else{this.options.title+=" ("+a+"/s)"}}else{if(n.mode=="byte"){this.options.title=" ("+a+")"}else{this.options.title=" ("+a+"/s)"}}}else{if(n.mode=="timeus"){var e=0,A,r=1000,f=1,a="us",h;if(b.max>=10*r*r){f=r*r;a="s"}else{if(b.max>=10*r){f=r;a="ms"}else{if(b.max<100){b.max=100}}}if(b.min<0){b.min=0}b.tickSize=Flotr.getTickSize(n.noTicks,b.min/f,b.max/f,n.tickDecimals);b.tickSize=b.tickSize*f;e=b.tickSize*Math.ceil(b.min/b.tickSize);for(q=0;e+q*b.tickSize<=b.max;++q){j=(e+q*b.tickSize);h=(j/f).toFixed();j=h*f;b.ticks.push({v:j,label:n.tickFormatter(h)})}if(this.options.title){this.options.title+=" ("+a+")"}else{this.options.title=" ("+a+")"}}else{if(n.mode=="lagtime"){var e=0,A,f=1,a=_T("common","time_seconds"),h;if(b.max>=24*60*60){f=60*60*24;a=_T("common","time_days")}else{if(b.max>=10*60*60){f=60*60;a=_T("common","time_hours")}else{if(b.max>=10*60){f=60;a=_T("common","time_minutes")}else{if(b.max<10){b.max=10}}}}if(b.min<0){b.min=0}b.tickSize=Flotr.getTickSize(n.noTicks,b.min/f,b.max/f,n.tickDecimals);b.tickSize=b.tickSize*f;e=b.tickSize*Math.ceil(b.min/b.tickSize);for(q=0;e+q*b.tickSize<=b.max;++q){j=(e+q*b.tickSize);h=(j/f).toFixed();j=h*f;b.ticks.push({v:j,label:n.tickFormatter(h)})}if(this.options.title){this.options.title+=" ("+a+")"}else{this.options.title=" ("+a+")"}}else{if(n.mode=="datasize"){var e=0,A,f=1024,a=_T("common","size_kb"),h;if(b.max>=10*1024*1024*1024*1024){f=1024*1024*1024*1024;a=_T("common","size_tb")}else{if(b.max>=10*1024*1024*1024){f=1024*1024*1024;a=_T("common","size_gb")}else{if(b.max>=10*1024*1024){f=1024*1024;a=_T("common","size_mb")}else{if(b.max<10*1024){b.max=10*1024}}}}if(b.min<0){b.min=0}b.tickSize=Flotr.getTickSize(n.noTicks,b.min/f,b.max/f,n.tickDecimals);b.tickSize=b.tickSize*f;e=b.tickSize*Math.ceil(b.min/b.tickSize);for(q=0;e+q*b.tickSize<=b.max;++q){j=(e+q*b.tickSize);h=(j/f).toFixed();j=h*f;b.ticks.push({v:j,label:n.tickFormatter(h)})}if(this.options.title){this.options.title+=" ("+a+")"}else{this.options.title=" ("+a+")"}}else{var e=b.tickSize*Math.ceil(b.min/b.tickSize),A;for(q=0;e+q*b.tickSize<=b.max;++q){j=e+q*b.tickSize;A=n.tickDecimals;if(A==null){A=1-Math.floor(Math.log(b.tickSize)/Math.LN10)}if(A<0){A=0}j=j.toFixed(A);b.ticks.push({v:j,label:n.tickFormatter(j)})}}}}}}}},calculateSpacing:function(){var r=this.axes,u=this.options,m=this.series,f=u.grid.labelMargin,t=r.x,b=r.x2,o=r.y,q=r.y2,h=2,k,g,e,n;if(u.maxOutset){h=u.maxOutset}[t,b,o,q].each(function(j){var a="";if(j.options.showLabels){for(k=0;k<j.ticks.length;++k){e=j.ticks[k].label.length;if(e>a.length){a=j.ticks[k].label}}}j.maxLabel=this.getTextDimensions(a,{size:u.fontSize,angle:Flotr.toRad(j.options.labelsAngle)},"font-size:smaller;","flotr-grid-label");if(j.options.minLabelWidth&&j.options.minLabelWidth>j.maxLabel.width){j.maxLabel.width=j.options.minLabelWidth}if(j.options.minLabelHeight&&j.options.minLabelHeight>j.maxLabel.height){j.maxLabel.height=j.options.minLabelHeight}if(j.options.height){j.height=j.options.height}j.titleSize=this.getTextDimensions(j.options.title,{size:u.fontSize*1.2,angle:Flotr.toRad(j.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},this);n=this.getTextDimensions(u.title,{size:u.fontSize*1.5},"font-size:1em;font-weight:bold;","flotr-title");this.titleHeight=n.height;n=this.getTextDimensions(u.subtitle,{size:u.fontSize},"font-size:smaller;","flotr-subtitle");this.subtitleHeight=n.height;if(u.show){h=Math.max(h,u.points.radius+u.points.lineWidth/2)}for(g=0;g<u.length;++g){if(m[g].points.show){h=Math.max(h,m[g].points.radius+m[g].points.lineWidth/2)}}var d=this.plotOffset;d.bottom+=(u.grid.circular?0:(t.options.showLabels?(t.maxLabel.height+f):(t.height?t.height:0)))+(t.options.title?(t.titleSize.height+f):0)+h;d.top+=(u.grid.circular?0:(b.options.showLabels?(b.maxLabel.height+f):(b.height?b.height:0)))+(b.options.title?(b.titleSize.height+f):0)+this.subtitleHeight+this.titleHeight+h;d.left+=(u.grid.circular?0:(o.options.showLabels?(o.maxLabel.width+f):0))+(o.options.title?(o.titleSize.width+f):0)+h;d.right+=(u.grid.circular?0:(q.options.showLabels?(q.maxLabel.width+f):0))+(q.options.title?(q.titleSize.width+f):0)+h;d.top=Math.floor(d.top);this.plotWidth=this.canvasWidth-d.left-d.right;this.plotHeight=this.canvasHeight-d.bottom-d.top;t.scale=this.plotWidth/(t.max-t.min);b.scale=this.plotWidth/(b.max-b.min);o.scale=this.plotHeight/(o.max-o.min);q.scale=this.plotHeight/(q.max-q.min)},draw:function(){this.drawGrid();this.drawLabels();this.drawTitles();this.drawGuides();if(this.series.length){this.el.fire("flotr:beforedraw",[this.series,this]);for(var a=0;a<this.series.length;a++){if(!this.series[a].hide){this.drawSeries(this.series[a])}}}this.drawOutline();this.el.fire("flotr:afterdraw",[this.series,this])},drawGrid:function(){var n,b=this.options,q=this.ctx,m;if(b.grid.verticalLines||b.grid.horizontalLines){this.el.fire("flotr:beforegrid",[this.axes.x,this.axes.y,b,this])}q.save();q.lineWidth=1;q.strokeStyle=b.grid.tickColor;if(b.grid.circular){q.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2);var k=Math.min(this.plotHeight,this.plotWidth)*b.radar.radiusRatio/2,d=this.axes.x.ticks.length,h=2*(Math.PI/d),e=-Math.PI/2;q.beginPath();if(b.grid.horizontalLines){m=this.axes.y;for(var g=0;g<m.ticks.length;++g){n=m.ticks[g].v;var l=n/m.max;for(var f=0;f<=d;++f){q[f==0?"moveTo":"lineTo"](Math.cos(f*h+e)*k*l,Math.sin(f*h+e)*k*l)}}}if(b.grid.verticalLines){for(var g=0;g<d;++g){q.moveTo(0,0);q.lineTo(Math.cos(g*h+e)*k,Math.sin(g*h+e)*k)}}q.stroke()}else{q.translate(this.plotOffset.left,this.plotOffset.top);if(b.grid.backgroundColor!=null){q.fillStyle=this.processColor(b.grid.backgroundColor,{x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight});q.fillRect(0,0,this.plotWidth,this.plotHeight)}q.beginPath();if(b.grid.verticalLines){m=this.axes.x;for(var g=0;g<m.ticks.length;++g){n=m.ticks[g].v;if((n<=m.min||n>=m.max)||(n==m.min||n==m.max)&&b.grid.outlineWidth!=0){continue}q.moveTo(Math.floor(m.d2p(n))+q.lineWidth/2,0);q.lineTo(Math.floor(m.d2p(n))+q.lineWidth/2,this.plotHeight)}}if(b.grid.horizontalLines){m=this.axes.y;for(var f=0;f<m.ticks.length;++f){n=m.ticks[f].v;if((n<=m.min||n>=m.max)||(n==m.min||n==m.max)&&b.grid.outlineWidth!=0){continue}q.moveTo(0,Math.floor(m.d2p(n))+q.lineWidth/2);q.lineTo(this.plotWidth,Math.floor(m.d2p(n))+q.lineWidth/2)}}q.stroke()}q.restore();if(b.grid.verticalLines||b.grid.horizontalLines){this.el.fire("flotr:aftergrid",[this.axes.x,this.axes.y,b,this])}},drawOutline:function(){var k,a=this.options,l=this.ctx;if(a.grid.outlineWidth==0){return}l.save();if(a.grid.circular){l.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2);var h=Math.min(this.plotHeight,this.plotWidth)*a.radar.radiusRatio/2,b=this.axes.x.ticks.length,g=2*(Math.PI/b),e=-Math.PI/2;l.beginPath();l.lineWidth=a.grid.outlineWidth;l.strokeStyle=a.grid.color;l.lineJoin="round";for(var f=0;f<=b;++f){l[f==0?"moveTo":"lineTo"](Math.cos(f*g+e)*h,Math.sin(f*g+e)*h)}l.stroke()}else{l.translate(this.plotOffset.left,this.plotOffset.top);var d=a.grid.outlineWidth,j=0.5-d+((d+1)%2/2);l.lineWidth=d;l.strokeStyle=a.grid.color;l.lineJoin="miter";l.strokeRect(j,j,this.plotWidth+(-2*j),this.plotHeight+(-2*j))}l.restore()},drawGuides:function(){var b=this.options,a=this.ctx;if(!b.guides){return}a.save();b.guides.each(function(d){if(!d.mode){return}if(-1!==d.mode.indexOf("line")){if(-1!==d.mode.indexOf("y")){if(0===d.value){return}var e=this.axes.y;a.beginPath();a.lineWidth=d.lineWidth;a.strokeStyle=d.color;a.moveTo(this.plotOffset.left,this.plotOffset.top+e.d2p(d.value));a.lineTo(this.plotOffset.left+this.plotWidth,this.plotOffset.top+e.d2p(d.value));a.stroke();a.closePath()}}},this);a.restore()},drawLabels:function(){var d=0,e,n,q,l,r,h,m,f=this.options,o=this.ctx,w=this.axes;for(q=0;q<w.x.ticks.length;++q){if(w.x.ticks[q].label){++d}}n=this.plotWidth/d;if(f.grid.circular){o.save();o.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2);var g=this.plotHeight*f.radar.radiusRatio/2+f.fontSize,v=this.axes.x.ticks.length,b=2*(Math.PI/v),u=-Math.PI/2;var t={size:f.fontSize};e=w.x;t.color=e.options.color||f.grid.color;for(q=0;q<e.ticks.length&&e.options.showLabels;++q){r=e.ticks[q];r.label+="";if(!r.label||r.label.length==0){continue}var k=Math.cos(q*b+u)*g,j=Math.sin(q*b+u)*g;t.angle=Flotr.toRad(e.options.labelsAngle);t.textBaseline="middle";t.textAlign=(Math.abs(k)<0.1?"center":(k<0?"right":"left"));Flotr.drawText(o,r.label,k,j,t)}e=w.y;t.color=e.options.color||f.grid.color;for(q=0;q<e.ticks.length&&e.options.showLabels;++q){r=e.ticks[q];r.label+="";if(!r.label||r.label.length==0){continue}t.angle=Flotr.toRad(e.options.labelsAngle);t.textBaseline="middle";t.textAlign="left";Flotr.drawText(o,r.label,3,-(e.ticks[q].v/e.max)*(g-f.fontSize),t)}o.restore();return}if(!f.HtmlText&&this.textEnabled){var t={size:f.fontSize};e=w.x;t.color=e.options.color||f.grid.color;for(q=0;q<e.ticks.length&&e.options.showLabels&&e.used;++q){r=e.ticks[q];if(!r.label||r.label.length==0){continue}h=e.d2p(r.v);if(h<0||h>this.plotWidth){continue}t.angle=Flotr.toRad(e.options.labelsAngle);t.textAlign="center";t.textBaseline="top";t=Flotr.getBestTextAlign(t.angle,t);Flotr.drawText(o,r.label,this.plotOffset.left+h,this.plotOffset.top+this.plotHeight+f.grid.labelMargin,t)}e=w.x2;t.color=e.options.color||f.grid.color;for(q=0;q<e.ticks.length&&e.options.showLabels&&e.used;++q){r=e.ticks[q];if(!r.label||r.label.length==0){continue}h=e.d2p(r.v);if(h<0||h>this.plotWidth){continue}t.angle=Flotr.toRad(e.options.labelsAngle);t.textAlign="center";t.textBaseline="bottom";t=Flotr.getBestTextAlign(t.angle,t);Flotr.drawText(o,r.label,this.plotOffset.left+h,this.plotOffset.top+f.grid.labelMargin,t)}e=w.y;t.color=e.options.color||f.grid.color;for(q=0;q<e.ticks.length&&e.options.showLabels&&e.used;++q){r=e.ticks[q];if(!r.label||r.label.length==0){continue}m=e.d2p(r.v);if(m<0||m>this.plotHeight){continue}t.angle=Flotr.toRad(e.options.labelsAngle);t.textAlign="right";t.textBaseline="middle";t=Flotr.getBestTextAlign(t.angle,t);Flotr.drawText(o,r.label,this.plotOffset.left-f.grid.labelMargin,this.plotOffset.top+m,t)}e=w.y2;t.color=e.options.color||f.grid.color;for(q=0;q<e.ticks.length&&e.options.showLabels&&e.used;++q){r=e.ticks[q];if(!r.label||r.label.length==0){continue}m=e.d2p(r.v);if(m<0||m>this.plotHeight){continue}t.angle=Flotr.toRad(e.options.labelsAngle);t.textAlign="left";t.textBaseline="middle";t=Flotr.getBestTextAlign(t.angle,t);Flotr.drawText(o,r.label,this.plotOffset.left+this.plotWidth+f.grid.labelMargin,this.plotOffset.top+m,t);o.save();o.strokeStyle=t.color;o.beginPath();o.moveTo(this.plotOffset.left+this.plotWidth-8,this.plotOffset.top+e.d2p(r.v));o.lineTo(this.plotOffset.left+this.plotWidth,this.plotOffset.top+e.d2p(r.v));o.stroke();o.restore()}}else{if(w.x.options.showLabels||w.x2.options.showLabels||w.y.options.showLabels||w.y2.options.showLabels){l=['<div style="font-size:smaller;color:'+f.grid.color+';" class="flotr-labels">'];e=w.x;if(e.options.showLabels){for(q=0;q<e.ticks.length;++q){r=e.ticks[q];if(!r.label||r.label.length==0||(this.plotOffset.left+e.d2p(r.v)<0)||(this.plotOffset.left+e.d2p(r.v)>this.canvasWidth)){continue}l.push('<div style="position:absolute;top:',(this.plotOffset.top+this.plotHeight+f.grid.labelMargin),"px;left:",(this.plotOffset.left+e.d2p(r.v)-n/2),"px;width:",n,"px;text-align:center;",(e.options.color?("color:"+e.options.color+";"):""),'" class="flotr-grid-label">',r.label,"</div>")}}e=w.x2;if(e.options.showLabels&&e.used){for(q=0;q<e.ticks.length;++q){r=e.ticks[q];if(!r.label||r.label.length==0||(this.plotOffset.left+e.d2p(r.v)<0)||(this.plotOffset.left+e.d2p(r.v)>this.canvasWidth)){continue}l.push('<div style="position:absolute;top:',(this.plotOffset.top-f.grid.labelMargin-e.maxLabel.height),"px;left:",(this.plotOffset.left+e.d2p(r.v)-n/2),"px;width:",n,"px;text-align:center;",(e.options.color?("color:"+e.options.color+";"):""),'" class="flotr-grid-label">',r.label,"</div>")}}e=w.y;if(e.options.showLabels){for(q=0;q<e.ticks.length;++q){r=e.ticks[q];if(!r.label||r.label.length==0||(this.plotOffset.top+e.d2p(r.v)<0)||(this.plotOffset.top+e.d2p(r.v)>this.canvasHeight)){continue}l.push('<div style="position:absolute;top:',(this.plotOffset.top+e.d2p(r.v)-e.maxLabel.height/2),"px;left:0;width:",(this.plotOffset.left-f.grid.labelMargin),"px;text-align:right;",(e.options.color?("color:"+e.options.color+";"):""),(e.options.fontSize?("font-size:"+e.options.fontSize+";"):""),'" class="flotr-grid-label flotr-grid-label-y">',r.label,"</div>")}}e=w.y2;if(e.options.showLabels&&e.used){o.save();o.strokeStyle=e.options.color||f.grid.color;o.beginPath();for(q=0;q<e.ticks.length;++q){r=e.ticks[q];if(!r.label||r.label.length==0||(this.plotOffset.top+e.d2p(r.v)<0)||(this.plotOffset.top+e.d2p(r.v)>this.canvasHeight)){continue}l.push('<div style="position:absolute;top:',(this.plotOffset.top+e.d2p(r.v)-e.maxLabel.height/2),"px;right:0;width:",(this.plotOffset.right-f.grid.labelMargin),"px;text-align:left;",(e.options.color?("color:"+e.options.color+";"):""),'" class="flotr-grid-label flotr-grid-label-y">',r.label,"</div>");o.moveTo(this.plotOffset.left+this.plotWidth-8,this.plotOffset.top+e.d2p(r.v));o.lineTo(this.plotOffset.left+this.plotWidth,this.plotOffset.top+e.d2p(r.v))}o.stroke();o.restore()}l.push("</div>");this.el.insert(l.join(""))}}},drawTitles:function(){var f,e=this.options,h=e.grid.labelMargin,d=this.ctx,b=this.axes;if(!e.HtmlText&&this.textEnabled){var g={size:e.fontSize,color:e.grid.color,textAlign:"center"};if(e.subtitle){Flotr.drawText(d,e.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,g)}g.weight=1.5;g.size*=1.5;if(e.title){Flotr.drawText(d,e.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,g)}g.weight=1.8;g.size*=0.8;if(b.x.options.title&&b.x.used){g.textAlign="center";g.textBaseline="top";g.angle=Flotr.toRad(b.x.options.titleAngle);g=Flotr.getBestTextAlign(g.angle,g);Flotr.drawText(d,b.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+b.x.maxLabel.height+this.plotHeight+2*h,g)}if(b.x2.options.title&&b.x2.used){g.textAlign="center";g.textBaseline="bottom";g.angle=Flotr.toRad(b.x2.options.titleAngle);g=Flotr.getBestTextAlign(g.angle,g);Flotr.drawText(d,b.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-b.x2.maxLabel.height-2*h,g)}if(b.y.options.title&&b.y.used){g.textAlign="right";g.textBaseline="middle";g.angle=Flotr.toRad(b.y.options.titleAngle);g=Flotr.getBestTextAlign(g.angle,g);Flotr.drawText(d,b.y.options.title,this.plotOffset.left-b.y.maxLabel.width-2*h,this.plotOffset.top+this.plotHeight/2,g)}if(b.y2.options.title&&b.y2.used){g.textAlign="left";g.textBaseline="middle";g.angle=Flotr.toRad(b.y2.options.titleAngle);g=Flotr.getBestTextAlign(g.angle,g);Flotr.drawText(d,b.y2.options.title,this.plotOffset.left+this.plotWidth+b.y2.maxLabel.width+2*h,this.plotOffset.top+this.plotHeight/2,g)}}else{f=['<div style="color:'+e.grid.color+';" class="flotr-titles">'];if(e.title){f.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,"px;");if(!e.titleCls){f.push("font-size:1em;font-weight:bold;text-align:center;")}f.push('" class="flotr-title ');if(e.titleCls){f.push(e.titleCls)}f.push('">',e.title,"</div>")}if(e.subtitle){f.push('<div style="position:absolute;top:',this.titleHeight,"px;left:",this.plotOffset.left,"px;font-size:smaller;text-align:center;width:",this.plotWidth,'px;" class="flotr-subtitle">',e.subtitle,"</div>")}f.push("</div>");f.push('<div class="flotr-axis-title" style="font-weight:bold;">');if(b.x.options.title&&b.x.used){f.push('<div style="position:absolute;top:',(this.plotOffset.top+this.plotHeight+e.grid.labelMargin+b.x.titleSize.height),"px;left:",this.plotOffset.left,"px;width:",this.plotWidth,'px;text-align:center;" class="flotr-axis-title">',b.x.options.title,"</div>")}if(b.x2.options.title&&b.x2.used){f.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,'px;text-align:center;" class="flotr-axis-title">',b.x2.options.title,"</div>")}if(b.y.options.title&&b.y.used){f.push('<div style="position:absolute;top:',(this.plotOffset.top+this.plotHeight/2-b.y.titleSize.height/2),'px;left:0;text-align:right;" class="flotr-axis-title">',b.y.options.title,"</div>")}if(b.y2.options.title&&b.y2.used){f.push('<div style="position:absolute;top:',(this.plotOffset.top+this.plotHeight/2-b.y.titleSize.height/2),'px;right:0;text-align:right;" class="flotr-axis-title">',b.y2.options.title,"</div>")}f.push("</div>");this.el.insert(f.join(""))}},drawSeries:function(a){a=a||this.series;var b=false;for(type in Flotr.graphTypes){if(a[type]&&a[type].show){b=true;this[type].draw(a)}}if(!b){this[this.options.defaultType].draw(a)}},insertLegend:function(){if(!this.options.legend.show){return}var o=this.series,q=this.plotOffset,e=this.options,a=e.legend,N=[],b=false,A=this.ctx,D;var C=o.findAll(function(m){return(m.label&&!m.hide)}).length;if(C){if(!e.HtmlText&&this.textEnabled&&!$(a.container)){var F={size:e.fontSize*1.1,color:e.grid.color};var w=a.position,z=a.margin,v=a.labelBoxWidth,M=a.labelBoxHeight,E=a.labelBoxMargin,I=q.left+z,G=q.top+z;var L=0;for(D=o.length-1;D>-1;--D){if(!o[D].label||o[D].hide){continue}var j=a.labelFormatter(o[D].label);L=Math.max(L,Flotr.measureText(A,j,F).width)}var u=Math.round(v+E*3+L),f=Math.round(C*(E+M)+E);if(w.charAt(0)=="s"){G=q.top+this.plotHeight-(z+f)}if(w.charAt(1)=="e"){I=q.left+this.plotWidth-(z+u)}var B=this.processColor(e.legend.backgroundColor||"rgb(240,240,240)",{opacity:e.legend.backgroundOpacity||0.1});A.fillStyle=B;A.fillRect(I,G,u,f);A.strokeStyle=e.legend.labelBoxBorderColor;A.strokeRect(Flotr.toPixel(I),Flotr.toPixel(G),u,f);var n=I+E;var l=G+E;for(D=0;D<o.length;D++){if(!o[D].label||o[D].hide){continue}var j=a.labelFormatter(o[D].label);A.fillStyle=o[D].color;A.fillRect(n,l,v-1,M-1);A.strokeStyle=a.labelBoxBorderColor;A.lineWidth=1;A.strokeRect(Math.ceil(n)-1.5,Math.ceil(l)-1.5,v+2,M+2);Flotr.drawText(A,j,n+v+E,l+(M+F.size-A.fontDescent(F))/2,F);l+=M+E}}else{for(D=0;D<o.length;++D){if(!o[D].label||o[D].hide){continue}if(D%e.legend.noColumns==0){N.push(b?"</tr><tr>":"<tr>");b=true}var t=o[D],j=a.labelFormatter(t.label),k=a.labelBoxWidth,h=a.labelBoxHeight,d="opacity:"+t.bars.fillOpacity+";filter:alpha(opacity="+t.bars.fillOpacity*100+");",B="background-color:"+((t.bars.show&&t.bars.fillColor&&t.bars.fill)?t.bars.fillColor:t.color)+";";N.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',a.labelBoxBorderColor,';padding:1px">','<div style="width:',(k-1),"px;height:",(h-1),"px;border:1px solid ",o[D].color,'">','<div style="width:',k,"px;height:",h,"px;",d,B,'"></div>',"</div>","</div>","</td>",'<td class="flotr-legend-label">',j,"</td>")}if(b){N.push("</tr>")}if(N.length>0){var H='<table style="font-size:smaller;color:'+e.grid.color+'">'+N.join("")+"</table>";if(e.legend.container!=null){$(e.legend.container).innerHTML=H}else{var g="",w=e.legend.position,z=e.legend.margin;if(w.charAt(0)=="n"){g+="top:"+(z+q.top)+"px;bottom:auto;"}else{if(w.charAt(0)=="s"){g+="bottom:"+(z+q.bottom)+"px;top:auto;"}}if(w.charAt(1)=="e"){g+="right:"+(z+q.right)+"px;left:auto;"}else{if(w.charAt(1)=="w"){g+="left:"+(z+q.left)+"px;right:auto;"}}var r=this.el.insert('<div class="flotr-legend" style="position:absolute;z-index:2;'+g+'">'+H+"</div>").select("div.flotr-legend")[0];if(e.legend.backgroundOpacity!=0){var K=e.legend.backgroundColor;if(K==null){var J=(e.grid.backgroundColor!=null)?e.grid.backgroundColor:Flotr.Color.extract(r);K=this.processColor(J,null,{opacity:1})}this.el.insert('<div class="flotr-legend-bg" style="position:absolute;width:'+r.getWidth()+"px;height:"+r.getHeight()+"px;"+g+"background-color:"+K+';"> </div>').select("div.flotr-legend-bg")[0].setOpacity(e.legend.backgroundOpacity)}}}}}},getEventPosition:function(b){var g=this.overlay.cumulativeOffset(),f=Event.pointer(b),a=this.overlay.cumulativeScrollOffset(),e=(f.x+a.left-g.left-this.plotOffset.left),d=(f.y+a.top-g.top-this.plotOffset.top);return{x:this.axes.x.p2d(e),x2:this.axes.x2.p2d(e),y:this.axes.y.p2d(d),y2:this.axes.y2.p2d(d),relX:e,relY:d,absX:f.x,absY:f.y}},clickHandler:function(a){if(this.ignoreClick){return this.ignoreClick=false}this.el.fire("flotr:click",[this.getEventPosition(a),this])},mouseMoveHandler:function(a){var b=this.getEventPosition(a);this.lastMousePos.pageX=b.absX;this.lastMousePos.pageY=b.absY;if(this.options.crosshair.mode){this.clearCrosshair()}if(this.selectionInterval==null&&(this.options.mouse.track||this.series.any(function(d){return d.mouse&&d.mouse.track}))){this.hit(b)}if(this.options.crosshair.mode){this.drawCrosshair(b)}this.el.fire("flotr:mousemove",[a,b,this])},mouseOutHandler:function(b){var a=this.mouseTrack;if(a){a.hide()}this.clearHit();this.clearCrosshair()},mouseDownHandler:function(d){if(d.isRightClick()){d.stop();var b=this.overlay;b.hide();function a(){b.show();document.stopObserving("mousemove",a)}document.observe("mousemove",a);return}if(!this.options.selection.mode||!d.isLeftClick()){return}this.setSelectionPos(this.selection.first,d);if(this.selectionInterval!=null){clearInterval(this.selectionInterval)}this.lastMousePos.pageX=null;this.selectionInterval=setInterval(this.updateSelection.bindAsEventListener(this),1000/this.options.selection.fps);this.mouseUpHandler=this.mouseUpHandler.bindAsEventListener(this);document.observe("mouseup",this.mouseUpHandler)},fireSelectEvent:function(){var b=this.axes,h=this.selection,e,d,g,f;e=b.x.p2d(h.first.x);d=b.x.p2d(h.second.x);g=b.y.p2d(h.first.y);f=b.y.p2d(h.second.y);this.el.fire("flotr:select",[{x1:Math.min(e,d),y1:Math.min(g,f),x2:Math.max(e,d),y2:Math.max(g,f),xfirst:e,xsecond:d,yfirst:g,ysecond:f},this])},mouseUpHandler:function(a){document.stopObserving("mouseup",this.mouseUpHandler);a.stop();if(this.selectionInterval!=null){clearInterval(this.selectionInterval);this.selectionInterval=null}this.setSelectionPos(this.selection.second,a);this.clearSelection();if(this.selectionIsSane()){this.drawSelection();this.fireSelectEvent();this.ignoreClick=true}},setSelectionPos:function(e,b){var a=this.options,d=this.overlay.cumulativeOffset();if(a.selection.mode.indexOf("x")==-1){e.x=(e==this.selection.first)?0:this.plotWidth}else{e.x=b.pageX-d.left-this.plotOffset.left;e.x=Math.min(Math.max(0,e.x),this.plotWidth)}if(a.selection.mode.indexOf("y")==-1){e.y=(e==this.selection.first)?0:this.plotHeight}else{e.y=b.pageY-d.top-this.plotOffset.top;e.y=Math.min(Math.max(0,e.y),this.plotHeight)}},updateSelection:function(){if(this.lastMousePos.pageX==null){return}this.setSelectionPos(this.selection.second,this.lastMousePos);this.clearSelection();if(this.selectionIsSane()){this.drawSelection()}},clearSelection:function(){if(this.prevSelection==null){return}var j=this.prevSelection,f=this.octx.lineWidth,d=this.plotOffset,a=Math.min(j.first.x,j.second.x),g=Math.min(j.first.y,j.second.y),b=Math.abs(j.second.x-j.first.x),e=Math.abs(j.second.y-j.first.y);this.octx.clearRect(a+d.left-f/2+0.5,g+d.top-f/2+0.5,b+f,e+f);this.prevSelection=null},setSelection:function(b,h){var k=this.options,a=this.axes.x,g=this.axes.y,d=g.scale,j=a.scale,f=k.selection.mode.indexOf("x")!=-1,e=k.selection.mode.indexOf("y")!=-1;this.clearSelection();this.selection.first.y=(f&&!e)?0:(g.max-b.y1)*d;this.selection.second.y=(f&&!e)?this.plotHeight:(g.max-b.y2)*d;this.selection.first.x=(e&&!f)?0:(b.x1-a.min)*j;this.selection.second.x=(e&&!f)?this.plotWidth:(b.x2-a.min)*j;this.drawSelection();if(!h){this.fireSelectEvent()}},drawSelection:function(){var d=this.prevSelection,k=this.selection,j=this.octx,l=this.options,a=this.plotOffset;if(d!=null&&k.first.x==d.first.x&&k.first.y==d.first.y&&k.second.x==d.second.x&&k.second.y==d.second.y){return}j.save();j.strokeStyle=this.processColor(l.selection.color,{opacity:0.8});j.lineWidth=1;j.lineJoin="miter";j.fillStyle=this.processColor(l.selection.color,{opacity:0.4});this.prevSelection={first:{x:k.first.x,y:k.first.y},second:{x:k.second.x,y:k.second.y}};var f=Math.min(k.first.x,k.second.x),e=Math.min(k.first.y,k.second.y),g=Math.abs(k.second.x-k.first.x),b=Math.abs(k.second.y-k.first.y);j.fillRect(f+a.left+0.5,e+a.top+0.5,g,b);j.strokeRect(f+a.left+0.5,e+a.top+0.5,g,b);j.restore()},drawCrosshair:function(g){var e=this.octx,d=this.options,b=this.plotOffset,a=b.left+g.relX+(this.options.crosshair.lineWidth/2),f=b.top+g.relY+0.5;if(g.relX<0||g.relY<0||g.relX>this.plotWidth||g.relY>this.plotHeight){this.el.style.cursor=null;this.el.removeClassName("flotr-crosshair");return}this.lastMousePos.relX=null;this.lastMousePos.relY=null;if(d.crosshair.hideCursor){this.el.style.cursor=Prototype.Browser.Gecko?"none":"url(blank.cur),crosshair";this.el.addClassName("flotr-crosshair")}e.save();e.strokeStyle=d.crosshair.color;e.lineWidth=d.crosshair.lineWidth;e.beginPath();if(d.crosshair.mode.indexOf("x")!=-1){e.moveTo(a,b.top);e.lineTo(a,b.top+this.plotHeight);this.lastMousePos.relX=a}if(d.crosshair.mode.indexOf("y")!=-1){e.moveTo(b.left,f);e.lineTo(b.left+this.plotWidth,f);this.lastMousePos.relY=f}e.stroke();e.restore()},clearCrosshair:function(){var a=this.options;if(this.lastMousePos.relX!=null){this.octx.clearRect(this.lastMousePos.relX-(a.crosshair.lineWidth/2),this.plotOffset.top,a.crosshair.lineWidth,this.plotHeight+1)}if(this.lastMousePos.relY!=null){this.octx.clearRect(this.plotOffset.left,this.lastMousePos.relY-0.5,this.plotWidth+1,1)}},selectionIsSane:function(){return Math.abs(this.selection.second.x-this.selection.first.x)>=5&&Math.abs(this.selection.second.y-this.selection.first.y)>=5},clearHit:function(){if(!this.prevHit){return}var g=this.prevHit,b=this.plotOffset,d=g.series,f=d.bars.lineWidth,j=g.xaxis,a=g.yaxis;if(null===d.mouse.lineColor){return}if(!d.bars.show){var e=d.points.radius;this.octx.clearRect(j.d2p(g.x)+b.left-e*2,a.d2p(g.y)+b.top-e*2,e*3+d.points.lineWidth*3,e*3+d.points.lineWidth*3)}else{var h=d.bars.barWidth;this.octx.clearRect(j.d2p(g.x-h/2)+b.left-f,a.d2p(g.y>=0?g.y:0)+b.top-f,j.d2p(h)+f*2,a.d2p(g.y<0?g.y:0)+f*2)}},drawHit:function(g){var d=this.octx,b=g.series,f=g.xaxis,a=g.yaxis;if(b.mouse.lineColor!=null){d.save();d.lineWidth=b.points.lineWidth;d.strokeStyle=b.mouse.lineColor;d.fillStyle=this.processColor(b.mouse.fillColor||"#ffffff",{opacity:b.mouse.fillOpacity});if(!b.bars.show){d.translate(this.plotOffset.left,this.plotOffset.top);d.beginPath();d.arc(f.d2p(g.x),a.d2p(g.y),b.mouse.radius,0,2*Math.PI,true);d.fill();d.stroke();d.closePath()}else{d.save();d.translate(this.plotOffset.left,this.plotOffset.top);d.beginPath();if(b.mouse.trackAll){d.moveTo(f.d2p(g.x),a.d2p(0));d.lineTo(f.d2p(g.x),a.d2p(g.yaxis.max))}else{var e=b.bars.barWidth;d.moveTo(f.d2p(g.x-(e/2)),a.d2p(0));d.lineTo(f.d2p(g.x-(e/2)),a.d2p(g.y));d.lineTo(f.d2p(g.x+(e/2)),a.d2p(g.y));d.lineTo(f.d2p(g.x+(e/2)),a.d2p(0));if(b.mouse.fillColor){d.fill()}}d.stroke();d.closePath();d.restore()}d.restore()}this.prevHit=g},newHit:function(e){var g=this.series,d=this.options,a,b;for(var f=g.length-1;f>-1;--f){s=g[f];if(!s.mouse.track){continue}for(var k in Flotr.graphTypes){if(!this[k].getHit){continue}var j=this[k].getHit(s,e);if(j.index!==undefined){a=s.mouse.trackDecimals;if(a==null||a<0){a=0}b=s.mouse.trackFormatter(j);this.drawTooltip(b,j.x,j.y,s.mouse);this.mouseTrack.fire("flotr:hit",[j,this])}}}},hit:function(v){var t=this.series,h=this.options,K=this.prevHit,u=this.plotOffset,l=this.octx,N,P,a,F,r,q,L,d,A,w,J,E={dist:Number.MAX_VALUE,x:null,y:null,relX:v.relX,relY:v.relY,absX:v.absX,absY:v.absY,mouse:null,xaxis:null,yaxis:null,series:null,index:null,seriesIndex:null},M={x:null,y:null,mouse:null,xaxis:null,yaxis:null,trackFormatter:null};if(h.mouse.trackAll){for(J=0;J<t.length;J++){z=t[0];N=z.data;L=z.xaxis;d=z.yaxis;a=(2*h.points.lineWidth)/L.scale*z.mouse.sensibility;A=L.p2d(v.relX);w=d.p2d(v.relY);for(var I=0;I<N.length;I++){r=N[I][0];q=N[I][1];if(q===null||L.min>r||L.max<r||d.min>q||d.max<q||A<L.min||A>L.max||w<d.min||w>d.max){continue}var B=Math.abs(r-A);if((!z.bars.show&&B<a)||(z.bars.show&&B<z.bars.barWidth/2)||(q<0&&w<0&&w>q)){var f=B;if(f<E.dist){E.dist=f;E.x=r;E.y=q;E.xaxis=L;E.yaxis=d;E.mouse=z.mouse;E.series=z;E.allSeries=t;E.index=I}}}}}else{for(J=0;J<t.length;J++){z=t[J];if(!z.mouse.track){continue}N=z.data;L=z.xaxis;d=z.yaxis;P=2*h.points.lineWidth*z.mouse.sensibility;a=P/L.scale;F=P/d.scale;A=L.p2d(v.relX);w=d.p2d(v.relY);for(var I=0,b,k;I<N.length;I++){r=N[I][0];q=N[I][1];if(q===null||L.min>r||L.max<r||d.min>q||d.max<q){continue}var B=Math.abs(r-A),e=Math.abs(q-w);if(((!z.bars.show)&&B<a&&e<F)||(z.bars.show&&B<z.bars.barWidth/2&&((q>0&&w>0&&w<q)||(q<0&&w<0&&w>q)))){var f=Math.sqrt(B*B+e*e);if(f<E.dist){E.dist=f;E.x=r;E.y=q;E.xaxis=L;E.yaxis=d;E.mouse=z.mouse;E.series=z;E.allSeries=t;E.index=I;E.seriesIndex=J}}}if(h.guides){h.guides.each(function(g){if(!g.mode){return}if(-1!==g.mode.indexOf("y")){if(0===g.value){return}if(Math.abs(d.d2p(g.value)-v.relY)<g.sensibility){M.x=A;M.y=g.value;M.xaxis=L;M.yaxis=d;M.mouse=z.mouse;M.trackFormatter=g.trackFormatter}}},this)}}}if(E.series&&(E.mouse&&E.mouse.track&&!K||(K))){var D=this.mouseTrack,o="",z=E.series,C=E.mouse.position,G=E.mouse.margin,H;if(null!==h.mouse.trackStyle){H="display:none;position:absolute;white-space:nowrap;"+h.mouse.trackStyle}else{H="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;"}if(!E.mouse.relative){if(C.charAt(0)=="n"){o+="top:"+(G+u.top)+"px;bottom:auto;"}else{if(C.charAt(0)=="s"){o+="bottom:"+(G+u.bottom)+"px;top:auto;"}}if(C.charAt(1)=="e"){o+="right:"+(G+u.right)+"px;left:auto;"}else{if(C.charAt(1)=="w"){o+="left:"+(G+u.left)+"px;right:auto;"}}}else{if(!z.bars.show){if(C.charAt(0)=="n"){o+="bottom:"+(G-u.top-E.yaxis.d2p(E.y)+this.canvasHeight)+"px;top:auto;"}else{if(C.charAt(0)=="s"){o+="top:"+(G+u.top+E.yaxis.d2p(E.y))+"px;bottom:auto;"}}if(C.charAt(1)=="e"){o+="left:"+(G+u.left+E.xaxis.d2p(E.x))+"px;right:auto;"}else{if(C.charAt(1)=="w"){o+="right:"+(G-u.left-E.xaxis.d2p(E.x)+this.canvasWidth)+"px;left:auto;"}}}else{o+="bottom:"+(G-u.top-E.yaxis.d2p(E.y/2)+this.canvasHeight)+"px;top:auto;";o+="left:"+(G+u.left+E.xaxis.d2p(E.x-h.bars.barWidth/2))+"px;right:auto;"}}H+=o;if(!D){this.mouseoverlay.insert('<div class="flotr-mouse-value" style="'+H+'"></div>');D=this.mouseTrack=this.el.select(".flotr-mouse-value")[0]}else{D.style.cssText=H;this.mouseTrack=D}if(E.x!==null&&E.y!==null){D.show();this.clearHit();this.drawHit(E);var O=E.mouse.trackDecimals;if(O==null||O<0){O=0}D.innerHTML=E.mouse.trackFormatter({x:E.x.toFixed(O),y:E.y.toFixed(O),series:E.series,index:E.index,nearest:E,mx:A,my:w});if(E.mouse.relative){this.checkLabelPos(D,C,u,G,E)}D.fire("flotr:hit",[E,this])}else{if(K){D.hide();this.clearHit()}}}else{if(h.guides&&M.mouse){var D=this.mouseTrack,o="",C=M.mouse.position,G=M.mouse.margin,H;if(null!==h.mouse.trackStyle){H="display:none;position:absolute;white-space:nowrap;"+h.mouse.trackStyle}else{H="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;"}if(!M.mouse.relative){if(C.charAt(0)=="n"){o+="top:"+(G+u.top)+"px;bottom:auto;"}else{if(C.charAt(0)=="s"){o+="bottom:"+(G+u.bottom)+"px;top:auto;"}}if(C.charAt(1)=="e"){o+="right:"+(G+u.right)+"px;left:auto;"}else{if(C.charAt(1)=="w"){o+="left:"+(G+u.left)+"px;right:auto;"}}}else{o+="bottom:"+(G-u.top-M.yaxis.d2p(M.y)+this.canvasHeight)+"px;top:auto;";o+="left:"+(G+u.left+M.xaxis.d2p(M.x))+"px;right:auto;"}H+=o;if(!D){this.mouseoverlay.insert('<div class="flotr-mouse-value" style="'+H+'"></div>');D=this.mouseTrack=this.el.select(".flotr-mouse-value")[0]}else{D.style.cssText=H;this.mouseTrack=D}if(M.x!==null&&M.y!==null){D.show();this.clearHit();D.innerHTML=M.trackFormatter({x:M.x,y:M.y,mx:A,my:w});if(M.mouse.relative){this.checkLabelPos(D,C,u,G,M)}D.fire("flotr:hit",[M,this])}}else{if(this.prevHit){this.mouseTrack.hide();this.clearHit()}}}},checkLabelPos:function(a,e,f,j,g){var k=j+f.top+g.yaxis.d2p(g.y),b=j-f.top-g.yaxis.d2p(g.y)+this.canvasHeight,h=j+f.left+g.xaxis.d2p(g.x),l=j-f.left-g.xaxis.d2p(g.x)+this.canvasWidth,d=$(a).getWidth(),o=$(a).getHeight();if("n"===e.charAt(0)){if(b+o>this.canvasHeight){a.style.top=k+"px";a.style.bottom="auto"}}else{if("s"===e.charAt(0)){if(k+o>this.canvasHeight){a.style.bottom=b+"px";a.style.top="auto"}}}if("e"===e.charAt(1)){if(h+d>this.canvasWidth){a.style.right=l+"px";a.style.left="auto"}}else{if("w"===e.charAt(1)){if(l+d>this.canvasWidth){a.style.left=h+"px";a.style.right="auto"}}}},drawTooltip:function(g,j,h,k){var a=this.mouseTrack,b="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",d=k.position,f=k.margin,e=this.plotOffset;if(!a){this.el.insert('<div class="flotr-mouse-value"></div>');a=this.mouseTrack=this.el.select(".flotr-mouse-value")[0]}if(j!==null&&h!==null){if(!k.relative){if(d.charAt(0)=="n"){b+="top:"+(f+e.top)+"px;bottom:auto;"}else{if(d.charAt(0)=="s"){b+="bottom:"+(f+e.bottom)+"px;top:auto;"}}if(d.charAt(1)=="e"){b+="right:"+(f+e.right)+"px;left:auto;"}else{if(d.charAt(1)=="w"){b+="left:"+(f+e.left)+"px;right:auto;"}}}else{if(d.charAt(0)=="n"){b+="bottom:"+(f-e.top-h+this.canvasHeight)+"px;top:auto;"}else{if(d.charAt(0)=="s"){b+="top:"+(f+e.top+h)+"px;bottom:auto;"}}if(d.charAt(1)=="e"){b+="left:"+(f+e.left+j)+"px;right:auto;"}else{if(d.charAt(1)=="w"){b+="right:"+(f-e.left-j+this.canvasWidth)+"px;left:auto;"}}}a.style.cssText=b;a.update(g).show()}else{a.hide()}},saveImage:function(e,d,a,b){var f=null;if(Prototype.Browser.IE){f="<html><body>"+this.canvas.firstChild.innerHTML+"</body></html>";return window.open().document.write(f)}switch(e){case"jpeg":case"jpg":f=Canvas2Image.saveAsJPEG(this.canvas,b,d,a);break;default:case"png":f=Canvas2Image.saveAsPNG(this.canvas,b,d,a);break;case"bmp":f=Canvas2Image.saveAsBMP(this.canvas,b,d,a);break}if(Object.isElement(f)&&b){this.restoreCanvas();this.canvas.hide();this.overlay.hide();this.el.insert(f.setStyle({position:"absolute"}))}},restoreCanvas:function(){this.canvas.show();this.overlay.show();this.el.select("img").invoke("remove")}});Flotr.Color=Class.create({initialize:function(j,h,e,f){this.rgba=["r","g","b","a"];var d=4;while(-1<--d){this[this.rgba[d]]=arguments[d]||((d==3)?1:0)}this.normalize()},adjust:function(e,d,f,b){var a=4;while(-1<--a){if(arguments[a]!=null){this[this.rgba[a]]+=arguments[a]}}return this.normalize()},scale:function(e,d,f,b){var a=4;while(-1<--a){if(arguments[a]!=null){this[this.rgba[a]]*=arguments[a]}}return this.normalize()},clone:function(){return new Flotr.Color(this.r,this.b,this.g,this.a)},limit:function(b,a,d){return Math.max(Math.min(b,d),a)},normalize:function(){var a=this.limit;this.r=a(parseInt(this.r),0,255);this.g=a(parseInt(this.g),0,255);this.b=a(parseInt(this.b),0,255);this.a=a(this.a,0,1);return this},distance:function(b){if(!b){return}b=new Flotr.Color.parse(b);var d=0,a=3;while(-1<--a){d+=Math.abs(this[this.rgba[a]]-b[this.rgba[a]])}return d},toString:function(){return(this.a>=1)?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"}});Object.extend(Flotr.Color,{parse:function(b){if(b instanceof Flotr.Color){return b}var a,e=Flotr.Color;if((a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))){return new e(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16))}if((a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))){return new e(parseInt(a[1]),parseInt(a[2]),parseInt(a[3]))}if((a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))){return new e(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16))}if((a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(b))){return new e(parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),parseFloat(a[4]))}if((a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))){return new e(parseFloat(a[1])*2.55,parseFloat(a[2])*2.55,parseFloat(a[3])*2.55)}if((a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(b))){return new e(parseFloat(a[1])*2.55,parseFloat(a[2])*2.55,parseFloat(a[3])*2.55,parseFloat(a[4]))}var d=(b+"").strip().toLowerCase();if(d=="transparent"){return new e(255,255,255,0)}return(a=e.names[d])?new e(a[0],a[1],a[2]):new e(0,0,0,0)},extract:function(b){var a;do{a=b.getStyle("background-color").toLowerCase();if(!(a==""||a=="transparent")){break}b=b.up()}while(!b.nodeName.match(/^body$/i));return new Flotr.Color(a=="rgba(0, 0, 0, 0)"?"transparent":a)},names:{aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}});Flotr.Date={format:function(j,h){if(!j){return}var g={h:j.getUTCHours().toString(),H:a(j.getUTCHours()),M:a(j.getUTCMinutes()),S:a(j.getUTCSeconds()),s:j.getUTCMilliseconds(),d:j.getUTCDate().toString(),m:(j.getUTCMonth()+1).toString(),y:j.getUTCFullYear().toString(),b:Flotr.Date.monthNames[j.getUTCMonth()]};function a(d){d+="";return d.length==1?"0"+d:d}var f=[],k,e=false;for(var b=0;b<h.length;++b){k=h.charAt(b);if(e){f.push(g[k]||k);e=false}else{if(k=="%"){e=true}else{f.push(k)}}}return f.join("")},getFormat:function(d,b){var a=Flotr.Date.timeUnits;if(d<a.second){return"%h:%M:%S.%s"}else{if(d<a.minute){return"%h:%M:%S"}else{if(d<a.day){return(b<2*a.day)?"%h:%M":"%b %d %h:%M"}else{if(d<a.month){return"%b %d"}else{if(d<a.year){return(b<a.year)?"%b":"%b %y"}else{return"%y"}}}}}},formatter:function(a,f){var g=new Date(a);if(f.options.timeFormat!=null){return Flotr.Date.format(g,f.options.timeFormat)}var e=f.max-f.min,b=f.tickSize*Flotr.Date.timeUnits[f.tickUnit];return Flotr.Date.format(g,Flotr.Date.getFormat(b,e))},generator:function(e){var k=[],j=new Date(e.min),h=Flotr.Date.timeUnits;var b=e.tickSize*h[e.tickUnit];switch(e.tickUnit){case"millisecond":j.setUTCMilliseconds(Flotr.floorInBase(j.getUTCMilliseconds(),e.tickSize));break;case"second":j.setUTCSeconds(Flotr.floorInBase(j.getUTCSeconds(),e.tickSize));break;case"minute":j.setUTCMinutes(Flotr.floorInBase(j.getUTCMinutes(),e.tickSize));break;case"hour":j.setUTCHours(Flotr.floorInBase(j.getUTCHours(),e.tickSize));break;case"month":j.setUTCMonth(Flotr.floorInBase(j.getUTCMonth(),e.tickSize));break;case"year":j.setUTCFullYear(Flotr.floorInBase(j.getUTCFullYear(),e.tickSize));break}if(b>=h.second){j.setUTCMilliseconds(0)}if(b>=h.minute){j.setUTCSeconds(0)}if(b>=h.hour){j.setUTCMinutes(0)}if(b>=h.day){j.setUTCHours(0)}if(b>=h.day*4){j.setUTCDate(1)}if(b>=h.year){j.setUTCMonth(0)}var m=0,l=Number.NaN,f;do{f=l;l=j.getTime();if(l>=e.min&&l<=e.max){k.push({v:l,label:Flotr.Date.formatter(l,e)})}if(e.tickUnit=="month"){if(e.tickSize<1){j.setUTCDate(1);var a=j.getTime();j.setUTCMonth(j.getUTCMonth()+1);var g=j.getTime();j.setTime(l+m*h.hour+(g-a)*e.tickSize);m=j.getUTCHours();j.setUTCHours(0)}else{j.setUTCMonth(j.getUTCMonth()+e.tickSize)}}else{if(e.tickUnit=="year"){j.setUTCFullYear(j.getUTCFullYear()+e.tickSize)}else{j.setTime(l+b)}}}while(l<e.max&&l!=f);return k},timeUnits:{millisecond:1,second:1000,minute:1000*60,hour:1000*60*60,day:1000*60*60*24,month:1000*60*60*24*30,year:1000*60*60*24*365.2425},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};Flotr.addType("lines",{options:{show:false,lineWidth:2,fill:false,fillColor:null,fillOpacity:0.4},draw:function(d){d=d||this.series;var b=this.ctx;b.save();b.translate(this.plotOffset.left,this.plotOffset.top);b.lineJoin="round";var e=d.lines.lineWidth;var a=d.shadowSize;if(a>0){b.lineWidth=a/2;var f=e/2+b.lineWidth/2;b.strokeStyle="rgba(0,0,0,0.1)";this.lines.plot(d,f+a/2);b.strokeStyle="rgba(0,0,0,0.2)";this.lines.plot(d,f);if(d.lines.fill){b.fillStyle="rgba(0,0,0,0.05)";this.lines.plotArea(d,f+a/2)}}b.lineWidth=e;b.strokeStyle=d.color;if(d.lines.fill){b.fillStyle=this.processColor(d.lines.fillColor||d.color,{opacity:d.lines.fillOpacity});this.lines.plotArea(d,0)}if(0<e){this.lines.plot(d,0)}b.restore()},plot:function(k,h){var q=this.ctx,a=k.xaxis,m=k.yaxis,j=k.data,f=j.length-1,l;if(j.length<2){return}var g=a.d2p(j[0][0]),e=m.d2p(j[0][1])+h;q.beginPath();q.moveTo(g,e);for(l=0;l<f;++l){var d=j[l][0],o=j[l][1],b=j[l+1][0],n=j[l+1][1];if(o===null||n===null){continue}if(o<=n&&o<m.min){if(n<m.min){continue}d=(m.min-o)/(n-o)*(b-d)+d;o=m.min}else{if(n<=o&&n<m.min){if(o<m.min){continue}b=(m.min-o)/(n-o)*(b-d)+d;n=m.min}}if(o>=n&&o>m.max){if(n>m.max){continue}d=(m.max-o)/(n-o)*(b-d)+d;o=m.max}else{if(n>=o&&n>m.max){if(o>m.max){continue}b=(m.max-o)/(n-o)*(b-d)+d;n=m.max}}if(d<=b&&d<a.min){if(b<a.min){continue}o=(a.min-d)/(b-d)*(n-o)+o;d=a.min}else{if(b<=d&&b<a.min){if(d<a.min){continue}n=(a.min-d)/(b-d)*(n-o)+o;b=a.min}}if(d>=b&&d>a.max){if(b>a.max){continue}o=(a.max-d)/(b-d)*(n-o)+o;d=a.max}else{if(b>=d&&b>a.max){if(d>a.max){continue}n=(a.max-d)/(b-d)*(n-o)+o;b=a.max}}if(g!=a.d2p(d)||e!=m.d2p(o)+h){q.moveTo(a.d2p(d),m.d2p(o)+h)}g=a.d2p(b);e=m.d2p(n)+h;q.lineTo(g,e)}q.stroke();q.closePath()},plotArea:function(l,f){var o=this.ctx,t=l.xaxis,b=l.yaxis,v=l.data,e=v.length-1,n,j=Math.min(Math.max(0,b.min),b.max),h=0,g=true;if(v.length<2){return}o.beginPath();for(var q=0;q<e;++q){var u=v[q][0],d=v[q][1],r=v[q+1][0],a=v[q+1][1];if(u<=r&&u<t.min){if(r<t.min){continue}d=(t.min-u)/(r-u)*(a-d)+d;u=t.min}else{if(r<=u&&r<t.min){if(u<t.min){continue}a=(t.min-u)/(r-u)*(a-d)+d;r=t.min}}if(u>=r&&u>t.max){if(r>t.max){continue}d=(t.max-u)/(r-u)*(a-d)+d;u=t.max}else{if(r>=u&&r>t.max){if(u>t.max){continue}a=(t.max-u)/(r-u)*(a-d)+d;r=t.max}}if(g){o.moveTo(t.d2p(u),b.d2p(j)+f);g=false}if(d>=b.max&&a>=b.max){o.lineTo(t.d2p(u),b.d2p(b.max)+f);o.lineTo(t.d2p(r),b.d2p(b.max)+f);continue}else{if(d<=b.min&&a<=b.min){o.lineTo(t.d2p(u),b.d2p(b.min)+f);o.lineTo(t.d2p(r),b.d2p(b.min)+f);continue}}var k=u,m=r;if(d<=a&&d<b.min&&a>=b.min){u=(b.min-d)/(a-d)*(r-u)+u;d=b.min}else{if(a<=d&&a<b.min&&d>=b.min){r=(b.min-d)/(a-d)*(r-u)+u;a=b.min}}if(d>=a&&d>b.max&&a<=b.max){u=(b.max-d)/(a-d)*(r-u)+u;d=b.max}else{if(a>=d&&a>b.max&&d<=b.max){r=(b.max-d)/(a-d)*(r-u)+u;a=b.max}}if(u!=k){n=(d<=b.min)?n=b.min:b.max;o.lineTo(t.d2p(k),b.d2p(n)+f);o.lineTo(t.d2p(u),b.d2p(n)+f)}o.lineTo(t.d2p(u),b.d2p(d)+f);o.lineTo(t.d2p(r),b.d2p(a)+f);if(r!=m){n=(a<=b.min)?b.min:b.max;o.lineTo(t.d2p(m),b.d2p(n)+f);o.lineTo(t.d2p(r),b.d2p(n)+f)}h=Math.max(r,m)}o.lineTo(t.d2p(t.max),b.d2p(j)+f);o.closePath();o.fill()}});Flotr.addType("bars",{options:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,fillOpacity:0.4,horizontal:false,stacked:false,centered:true},draw:function(d){var a=this.ctx,f=d.bars.barWidth,e=Math.min(d.bars.lineWidth,f);a.save();a.translate(this.plotOffset.left,this.plotOffset.top);a.lineJoin="miter";a.lineWidth=e;a.strokeStyle=d.color;a.save();this.bars.plotShadows(d,f,0,d.bars.fill);a.restore();if(d.bars.fill){var b=d.bars.fillColor||d.color;a.fillStyle=this.processColor(b,{opacity:d.bars.fillOpacity})}this.bars.plot(d,f,0,d.bars.fill);a.restore()},plot:function(l,o,e,r){var w=l.data;if(w.length<1){return}var u=l.xaxis,b=l.yaxis,q=this.ctx,t;for(t=0;t<w.length;t++){var k=w[t][0],j=w[t][1],f=true,m=true,a=true;if(j===null){continue}var h=0;if(l.bars.stacked){$H(u.values).each(function(x){if(x.key==k){h=x.value.stack||0;x.value.stack=h+j}})}if(l.bars.horizontal){var d=h,v=k+h,g=j,n=j+o}else{var d=k-(l.bars.centered?o/2:0),v=k+o-(l.bars.centered?o/2:0),g=h,n=j+h}if(v<u.min||d>u.max||n<b.min||g>b.max){continue}if(d<u.min){d=u.min;f=false}if(v>u.max){v=u.max;if(u.lastSerie!=l&&l.bars.horizontal){m=false}}if(g<b.min){g=b.min}if(n>b.max){n=b.max;if(b.lastSerie!=l&&!l.bars.horizontal){m=false}}if(r){q.beginPath();q.moveTo(u.d2p(d),b.d2p(g)+e);q.lineTo(u.d2p(d),b.d2p(n)+e);q.lineTo(u.d2p(v),b.d2p(n)+e);q.lineTo(u.d2p(v),b.d2p(g)+e);q.fill();q.closePath()}if(l.bars.lineWidth!=0&&(f||a||m)){q.beginPath();q.moveTo(u.d2p(d),b.d2p(g)+e);q[f?"lineTo":"moveTo"](u.d2p(d),b.d2p(n)+e);q[m?"lineTo":"moveTo"](u.d2p(v),b.d2p(n)+e);q[a?"lineTo":"moveTo"](u.d2p(v),b.d2p(g)+e);q.stroke();q.closePath()}}},plotShadows:function(j,k,d){var v=j.data;if(v.length<1){return}var r,h,g,t=j.xaxis,a=j.yaxis,q=this.ctx,n=this.options.shadowSize;for(r=0;r<v.length;r++){h=v[r][0];g=v[r][1];if(g===null){continue}var e=0;if(j.bars.stacked){$H(t.values).each(function(w){if(w.key==h){e=w.value.stackShadow||0;w.value.stackShadow=e+g}})}if(j.bars.horizontal){var b=e,u=h+e,f=g,l=g+k}else{var b=h-(j.bars.centered?k/2:0),u=h+k-(j.bars.centered?k/2:0),f=e,l=g+e}if(u<t.min||b>t.max||l<a.min||f>a.max){continue}if(b<t.min){b=t.min}if(u>t.max){u=t.max}if(f<a.min){f=a.min}if(l>a.max){l=a.max}var o=t.d2p(u)-t.d2p(b)-((t.d2p(u)+n<=this.plotWidth)?0:n);var m=Math.max(0,a.d2p(f)-a.d2p(l)-((a.d2p(f)+n<=this.plotHeight)?0:n));q.fillStyle="rgba(0,0,0,0.05)";q.fillRect(Math.min(t.d2p(b)+n,this.plotWidth),Math.min(a.d2p(l)+n,this.plotWidth),o,m)}},extendXRange:function(a){if(a.options.max==null){var d=a.min,h=a.max,f,e,l,n,k,m=[],g=null;for(f=0;f<this.series.length;++f){n=this.series[f];k=n.bars;if(k.show&&n.xaxis==a){if(k.centered){h=Math.max(a.datamax+0.5,h);d=Math.min(a.datamin-0.5,d)}if(!k.horizontal&&(k.barWidth+a.datamax>h)){h=a.max+(k.centered?k.barWidth/2:k.barWidth)}if(k.stacked&&k.horizontal){for(e=0;e<n.data.length;e++){if(k.show&&k.stacked){l=n.data[e][0]+"";m[l]=(m[l]||0)+n.data[e][1];g=n}}for(e in m){h=Math.max(m[e],h)}}}}a.lastSerie=g;a.max=h;a.min=d}},extendYRange:function(a){if(a.options.max==null){var g=a.max,k,e,d,m,h,l={},f=null;for(e=0;e<this.series.length;++e){m=this.series[e];h=m.bars;if(h.show&&!m.hide&&m.yaxis==a){if(h.horizontal&&(h.barWidth+a.datamax>g)){g=a.max+h.barWidth}if(h.stacked&&!h.horizontal){for(d=0;d<m.data.length;d++){if(m.bars.show&&m.bars.stacked){k=m.data[d][0]+"";l[k]=(l[k]||0)+m.data[d][1];f=m}}for(d in l){g=Math.max(l[d],g)}}}}a.lastSerie=f;a.max=g}}});Flotr.addType("points",{options:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#FFFFFF",fillOpacity:0.4},draw:function(d){var b=this.ctx,e=d.lines.lineWidth,a=d.shadowSize;b.save();b.translate(this.plotOffset.left,this.plotOffset.top);if(a>0){b.lineWidth=a/2;b.strokeStyle="rgba(0,0,0,0.1)";this.points.plotShadows(d,a/2+b.lineWidth/2,d.points.radius);b.strokeStyle="rgba(0,0,0,0.2)";this.points.plotShadows(d,b.lineWidth/2,d.points.radius)}b.lineWidth=d.points.lineWidth;b.strokeStyle=d.color;b.fillStyle=d.points.fillColor!=null?d.points.fillColor:d.color;this.points.plot(d,d.points.radius,d.points.fill);b.restore()},plot:function(d,f,j){var a=d.xaxis,g=d.yaxis,k=this.ctx,e,h,b=d.data;for(e=b.length-1;e>-1;--e){h=b[e][0],y=b[e][1];if(y===null||h<a.min||h>a.max||y<g.min||y>g.max){continue}k.beginPath();k.arc(a.d2p(h),g.d2p(y),f,0,2*Math.PI,true);if(j){k.fill()}k.stroke();k.closePath()}},plotShadows:function(e,b,g){var a=e.xaxis,h=e.yaxis,k=this.ctx,f,j,d=e.data;for(f=d.length-1;f>-1;--f){j=d[f][0],y=d[f][1];if(y===null||j<a.min||j>a.max||y<h.min||y>h.max){continue}k.beginPath();k.arc(a.d2p(j),h.d2p(y)+b,g,0,Math.PI,false);k.stroke();k.closePath()}},getHit:function(h,q){var f,e,j,k,m,r,n,b=h.points,g=h.data,l=h.mouse.sensibility*(b.lineWidth+b.radius),a={index:null,series:h,distance:Number.MAX_VALUE,x:null,y:null,precision:1};for(j=g.length-1;j>-1;--j){k=g[j];r=h.xaxis.d2p(k[0]);n=h.yaxis.d2p(k[1]);f=r-q.relX;e=n-q.relY;m=Math.sqrt(f*f+e*e);if(m<l&&m<a.distance){a={index:j,series:h,distance:m,data:k,x:r,y:n,precision:1}}}return a},drawHit:function(b,a){},clearHit:function(b,a){}});Flotr.defaultPieLabelFormatter=function(a){return(a.fraction*100).toFixed(2)+"%"};Flotr.addType("pie",{options:{show:false,lineWidth:1,fill:true,fillColor:null,fillOpacity:0.6,explode:6,sizeRatio:0.6,startAngle:Math.PI/4,labelFormatter:Flotr.defaultPieLabelFormatter,pie3D:false,pie3DviewAngle:(Math.PI/2*0.8),pie3DspliceThickness:20},draw:function(h){if(this.options.pie.drawn){return}var n=this.ctx,d=this.options,f=h.pie.lineWidth,l=h.shadowSize,w=h.data,j=this.plotOffset,e=(Math.min(this.canvasWidth,this.canvasHeight)*h.pie.sizeRatio)/2,k=[],o=1,u=Math.sin(h.pie.viewAngle)*h.pie.spliceThickness/o,q={size:d.fontSize*1.2,color:d.grid.color,weight:1.5},v={x:j.left+(this.plotWidth)/2,y:j.top+(this.plotHeight)/2},t=this.series.collect(function(z,x){if(z.pie.show&&z.data[0][1]!==null){return{name:(z.label||z.data[0][1]),value:[x,z.data[0][1]],options:z.pie,series:z}}}),b=t.pluck("value").pluck(1).inject(0,function(x,z){return x+z}),g=0,r=h.pie.startAngle,m=0;var a=t.collect(function(x){r+=g;m=parseFloat(x.value[1]);g=m/b;return{name:x.name,fraction:g,x:x.value[0],y:m,value:m,options:x.options,series:x.series,startAngle:2*r*Math.PI,endAngle:2*(r+g)*Math.PI}});n.save();if(l>0){a.each(function(B){if(B.startAngle==B.endAngle){return}var x=(B.startAngle+B.endAngle)/2,z=v.x+Math.cos(x)*B.options.explode+l,A=v.y+Math.sin(x)*B.options.explode+l;this.pie.plotSlice(z,A,e,B.startAngle,B.endAngle,false,o);if(h.pie.fill){n.fillStyle="rgba(0,0,0,0.1)";n.fill()}},this)}if(d.HtmlText||!this.textEnabled){k=['<div style="color:'+this.options.grid.color+'" class="flotr-labels">']}a.each(function(K,F){if(K.startAngle==K.endAngle){return}var E=(K.startAngle+K.endAngle)/2,D=K.series.color,z=K.options.fillColor||D,G=v.x+Math.cos(E)*K.options.explode,B=v.y+Math.sin(E)*K.options.explode;this.pie.plotSlice(G,B,e,K.startAngle,K.endAngle,false,o);if(h.pie.fill){n.fillStyle=this.processColor(z,{opacity:h.pie.fillOpacity});n.fill()}n.lineWidth=f;n.strokeStyle=D;n.stroke();var J=d.pie.labelFormatter(K),x=(Math.cos(E)<0),L=(Math.sin(E)>0),C=(K.options.explode||h.pie.explode)+e+4,I=v.x+Math.cos(E)*C,H=v.y+Math.sin(E)*C;if(K.fraction&&J){if(d.HtmlText||!this.textEnabled){var A="position:absolute;top:"+(H-5)+"px;";if(x){A+="right:"+(this.canvasWidth-I)+"px;text-align:right;"}else{A+="left:"+I+"px;text-align:left;"}k.push('<div style="',A,'" class="flotr-grid-label">',J,"</div>")}else{q.textAlign=x?"right":"left";q.textBaseline=L?"top":"bottom";Flotr.drawText(n,J,I,H,q)}}},this);if(d.HtmlText||!this.textEnabled){k.push("</div>");this.el.insert(k.join(""))}n.restore();d.pie.drawn=true},plotSlice:function(b,j,a,f,e,g,h){var d=this.ctx;h=h||1;d.scale(1,h);d.beginPath();d.moveTo(b,j);d.arc(b,j,a,f,e,g);d.lineTo(b,j);d.closePath()}});Flotr.addType("candles",{options:{show:false,lineWidth:1,wickLineWidth:1,candleWidth:0.6,fill:true,upFillColor:"#00A8F0",downFillColor:"#CB4B4B",fillOpacity:0.5,barcharts:false},draw:function(b){var a=this.ctx,d=b.candles.candleWidth;a.save();a.translate(this.plotOffset.left,this.plotOffset.top);a.lineJoin="miter";a.lineWidth=b.candles.lineWidth;this.candles.plotShadows(b,d/2);this.candles.plot(b,d/2);a.restore()},plot:function(m,f){var B=m.data;if(B.length<1){return}var w=m.xaxis,b=m.yaxis,r=this.ctx;for(var v=0;v<B.length;v++){var z=B[v],l=z[0],n=z[1],k=z[2],C=z[3],o=z[4];var e=l-m.candles.candleWidth/2,A=l+m.candles.candleWidth/2,h=Math.max(b.min,C),q=Math.min(b.max,k),a=Math.max(b.min,Math.min(n,o)),u=Math.min(b.max,Math.max(n,o));if(A<w.min||e>w.max||q<b.min||h>b.max){continue}var t=m.candles[n>o?"downFillColor":"upFillColor"];if(m.candles.fill&&!m.candles.barcharts){r.fillStyle=this.processColor(t,{opacity:m.candles.fillOpacity});r.fillRect(w.d2p(e),b.d2p(u)+f,w.d2p(A)-w.d2p(e),b.d2p(a)-b.d2p(u))}if(m.candles.lineWidth||m.candles.wickLineWidth){var l,j,g=(m.candles.wickLineWidth%2)/2;l=Math.floor(w.d2p((e+A)/2))+g;r.save();r.strokeStyle=t;r.lineWidth=m.candles.wickLineWidth;r.lineCap="butt";if(m.candles.barcharts){r.beginPath();r.moveTo(l,Math.floor(b.d2p(q)+f));r.lineTo(l,Math.floor(b.d2p(h)+f));j=Math.floor(b.d2p(n)+f)+0.5;r.moveTo(Math.floor(w.d2p(e))+g,j);r.lineTo(l,j);j=Math.floor(b.d2p(o)+f)+0.5;r.moveTo(Math.floor(w.d2p(A))+g,j);r.lineTo(l,j)}else{r.strokeRect(w.d2p(e),b.d2p(u)+f,w.d2p(A)-w.d2p(e),b.d2p(a)-b.d2p(u));r.beginPath();r.moveTo(l,Math.floor(b.d2p(u)+f));r.lineTo(l,Math.floor(b.d2p(q)+f));r.moveTo(l,Math.floor(b.d2p(a)+f));r.lineTo(l,Math.floor(b.d2p(h)+f))}r.stroke();r.closePath();r.restore()}}},plotShadows:function(j,e){var w=j.data;if(w.length<1||j.candles.barcharts){return}var t=j.xaxis,a=j.yaxis,o=this.options.shadowSize;for(var r=0;r<w.length;r++){var u=w[r],h=u[0],k=u[1],g=u[2],z=u[3],l=u[4];var b=h-j.candles.candleWidth/2,v=h+j.candles.candleWidth/2,f=Math.max(a.min,Math.min(k,l)),m=Math.min(a.max,Math.max(k,l));if(v<t.min||b>t.max||m<a.min||f>a.max){continue}var q=t.d2p(v)-t.d2p(b)-((t.d2p(v)+o<=this.plotWidth)?0:o);var n=Math.max(0,a.d2p(f)-a.d2p(m)-((a.d2p(f)+o<=this.plotHeight)?0:o));this.ctx.fillStyle="rgba(0,0,0,0.05)";this.ctx.fillRect(Math.min(t.d2p(b)+o,this.plotWidth),Math.min(a.d2p(m)+o,this.plotWidth),q,n)}},extendXRange:function(d){if(d.options.max==null){var a=d.min,e=d.max,b,f;for(b=0;b<this.series.length;++b){f=this.series[b].candles;if(f.show&&this.series[b].xaxis==d){e=Math.max(d.datamax+0.5,e);a=Math.min(d.datamin-0.5,a)}}d.max=e;d.min=a}}});Flotr.defaultMarkerFormatter=function(a){return(Math.round(a.y*100)/100)+""};Flotr.addType("markers",{options:{show:false,lineWidth:1,fill:false,fillColor:"#FFFFFF",fillOpacity:0.4,stroke:false,position:"ct",labelFormatter:Flotr.defaultMarkerFormatter},draw:function(e){e=e||this.series;var m=this.ctx,a=e.xaxis,h=e.yaxis,n=e.markers,d=e.data;m.save();m.translate(this.plotOffset.left,this.plotOffset.top);m.lineJoin="round";m.lineWidth=n.lineWidth;m.strokeStyle="rgba(0,0,0,0.5)";m.fillStyle=this.processColor(n.fillColor,{opacity:n.fillOpacity});for(var f=0;f<d.length;++f){var l=d[f][0],g=a.d2p(l),j=d[f][1],b=h.d2p(j),k=n.labelFormatter({x:l,y:j,index:f,data:d});this.markers.plot(g,b,k,n)}m.restore()},plot:function(h,f,g,k){var j=this.ctx,d=this.getTextDimensions(g,null,null),b=2,a=h,e=f;d.width=Math.floor(d.width+b*2);d.height=Math.floor(d.height+b*2);if(k.position.indexOf("c")!=-1){a-=d.width/2+b}else{if(k.position.indexOf("l")!=-1){a-=d.width}}if(k.position.indexOf("m")!=-1){e-=d.height/2+b}else{if(k.position.indexOf("t")!=-1){e-=d.height}}a=Math.floor(a)+0.5;e=Math.floor(e)+0.5;if(k.fill){j.fillRect(a,e,d.width,d.height)}if(k.stroke){j.strokeRect(a,e,d.width,d.height)}Flotr.drawText(j,g,a+b,e+b,{textBaseline:"top",textAlign:"left"})}});Flotr.addType("radar",{options:{show:false,lineWidth:2,fill:true,fillOpacity:0.4,radiusRatio:0.9},draw:function(d){var a=this.ctx,b=this.options;a.save();a.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2);a.lineWidth=d.radar.lineWidth;a.fillStyle="rgba(0,0,0,0.05)";a.strokeStyle="rgba(0,0,0,0.05)";this.radar.plot(d,d.shadowSize/2);a.strokeStyle="rgba(0,0,0,0.1)";this.radar.plot(d,d.shadowSize/4);a.strokeStyle=d.color;a.fillStyle=this.processColor(d.color,{opacity:d.radar.fillOpacity});this.radar.plot(d);a.restore()},plot:function(f,b){var m=this.ctx,n=this.options,e=f.data,h=Math.min(this.plotHeight,this.plotWidth)*n.radar.radiusRatio/2,g=2*(Math.PI/e.length),a=-Math.PI/2;b=b||0;m.beginPath();for(var d=0;d<e.length;++d){var l=e[d][0],k=e[d][1],j=k/this.axes.y.max;m[d==0?"moveTo":"lineTo"](Math.cos(d*g+a)*h*j+b,Math.sin(d*g+a)*h*j+b)}m.closePath();if(f.radar.fill){m.fill()}m.stroke()}});Flotr.addType("bubbles",{options:{show:false,lineWidth:2,fill:true,fillOpacity:0.4,baseRadius:2},draw:function(d){var a=this.ctx,b=this.options;a.save();a.translate(this.plotOffset.left,this.plotOffset.top);a.lineWidth=d.bubbles.lineWidth;a.fillStyle="rgba(0,0,0,0.05)";a.strokeStyle="rgba(0,0,0,0.05)";this.bubbles.plot(d,d.shadowSize/2);a.strokeStyle="rgba(0,0,0,0.1)";this.bubbles.plot(d,d.shadowSize/4);a.strokeStyle=d.color;a.fillStyle=this.processColor(d.color,{opacity:d.radar.fillOpacity});this.bubbles.plot(d);a.restore()},plot:function(d,a){var k=this.ctx,l=this.options,b=d.data,f=l.bubbles.baseRadius;a=a||0;for(var e=0;e<b.length;++e){var j=b[e][0],h=b[e][1],g=b[e][2];k.beginPath();k.arc(d.xaxis.d2p(j)+a,d.yaxis.d2p(h)+a,f*g,0,Math.PI*2,true);k.stroke();if(d.bubbles.fill){k.fill()}k.closePath()}}});(function(){var b=document.createElement("canvas"),a,e=Object.prototype.toString;if(e.apply(b.getContext)!=="[object Function]"){return}a=b.getContext("2d");if(!a||!window.Flotr||!window.Flotr.defaultOptions){return}try{window.Flotr.defaultOptions.resolution=SYNO.SDS.Utils.HiDPI.getRatio(a)}catch(d){}})();